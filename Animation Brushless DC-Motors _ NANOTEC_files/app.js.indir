/******/!function(e){function t(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}// webpackBootstrap
/******/
var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){i(1),e.exports=i(3)},function(e,t,i){"use strict";var r=i(2);window.ENV=r.IEnvironment.Production},function(e,t){"use strict";function i(e,t,i){window.ENV&&window.ENV===r.Production?e.debugEnabled(!1):e.debugEnabled(!0),angular.extend(t.defaults,{maxAge:9e5}),i.defaults.domain=location.hostname.substring(2),i.defaults.path="/"}i.$inject=["$logProvider","CacheFactoryProvider","$cookiesProvider"];var r;!function(e){e[e.Development=0]="Development",e[e.Production=1]="Production"}(r=t.IEnvironment||(t.IEnvironment={})),t.config=i},function(e,t,i){"use strict";var r,o=i(4),n=i(5),s=i(6),a=i(7),u=i(8),c=i(9),l=i(2),p=i(10),d=i(14),f=i(15),h=i(16),g=i(17),b=i(18),v=i(19),y=i(20),m=i(21),S=i(22),C=i(23),A=i(24),x=i(25),$=i(26),P=i(27),w=i(28),F=i(29),T=i(30),O=i(31),j=i(32),k=i(33),L=i(34),R=i(35),I=i(36),M=i(37),q=i(38),E=i(39),U=i(13),N=i(40),z=i(41),D=i(42),B=i(43),G=i(44),V=i(45),W=i(46),H=i(47),Q=i(48),Y=i(49),X=i(50),K=i(51),Z=i(52),J=i(53),ee=i(54),te=i(55),ie=i(56),re=i(57),oe=i(58),ne=i(59),se=i(60),ae=i(70),ue=i(71),ce=i(72),le=i(73),pe=i(74),de=i(75),fe=i(76),he=i(77),ge=i(78),be=i(79),ve=i(80),ye=i(81),me=i(82),_e=i(83),Se=i(84),Ce=i(85),Ae=i(86),xe=i(87),$e=i(88),Pe=i(89),we=i(90),Fe=i(91),Te=i(92),Oe=i(93),je=i(94);!function(e){var t=["ngCookies","ngTouch","ngSanitize","ngAria","elasticsearch","ui.bootstrap-slider","ui.bootstrap.typeahead","angular-cache","angular-advanced-searchbox","angular-click-outside","slick"],i=window.Raven;window.ENV&&window.ENV===l.IEnvironment.Production&&(i.config("https://4f3d264fc0094721840af8bfda83ff46@sentry.1drop.de/2"),i.addPlugin(i.Plugins.Angular),i.install(),t.push("ngRaven")),angular.module("nanotec",t).config(l.config).run(B.runBlock).constant("_",_).service("$$dsbStorage",fe.DsbStorage).service("AttributeFilterService",se.AttributeFilterService).service("AttributeService",ae.AttributeService).service("BasketService",ue.BasketService).service("CategoriesService",le.CategoriesService).service("ConfigurationFilterService",pe.ConfigurationFilterService).service("CurrentConfigurationService",de.CurrentConfigurationService).service("ElasticConnectionService",he.ElasticConnectionService).service("FilterListService",ge.FilterListService).service("GroupsService",be.GroupsService).service("LanguageMenuService",ye.LanguageMenuService).service("LoginMenuService",me.LoginMenuService).service("MobileNavService",_e.MobileNavService).service("PriceService",Ae.PriceService).service("ResultsService",xe.ResultsService).service("SearchService",$e.SearchService).service("TableColumnsService",Pe.TableColumnsService).service("TorqueSpeedService",we.TorqueSpeedService).service("UnitGroupsService",Te.UnitGroupsService).service("UnitSelectorMenuService",Oe.UnitSelectorMenuService).service("UserService",je.UserService).directive("ajaxForm",o.ajaxForm).directive("asideTreeNav",n.asideTreeNav).directive("attributeDescriptionModal",s.attributeDescriptionModal).directive("basket",a.basket).directive("checkout",u.checkout).directive("collapseTabs",c.collapseTabs).directive("configurator",p.configurator).directive("countRead",d.countRead).directive("currentConfiguration",h.currentConfiguration).directive("curve",f.curve).directive("departmentField",g.departmentField).directive("discountTable",b.discountTable).directive("domainSwitcher",v.domainSwitcher).directive("doubleScrollBarHorizontal",y.doubleScrollBarsHorizontal).directive("excerptMore",m.excerptMore).directive("filterAttribute",S.filterAttribute).directive("filterBox",C.filterBox).directive("filterCategory",A.filterCategory).directive("filterConfiguration",x.filterConfiguration).directive("filterList",$.filterList).directive("filterPrice",P.filterPrice).directive("filterTorqueAtSpeed",w.filterTorqueAtSpeed).directive("footerNavItem",F.footerNavItem).directive("fullPageLayover",T.fullPageLayover).directive("jDataTable",O.jDataTable).directive("listActions",j.listActions).directive("locations",R.locations).directive("mainNavigationItem",k.mainNavigationItem).directive("mobileNav",L.mobileNav).directive("offCanvas",I.offCanvas).directive("productFinder",M.productFinder).directive("productFinderResultsConfigurator",q.productFinderResultsConfigurator).directive("productFinderResultsDefault",E.productFinderResultsDefault).directive("resultMedia",U.resultMedia).directive("resultTableRow",N.resultTableRow).directive("resultTableRowDetails",z.resultTableRowDetails).directive("resizeTableHeaders",D.resizeTableHeaders).directive("scrollToAnchor",G.scrollToAnchor).directive("scrollToTop",V.scrollToTop).directive("selectRedirect",Q.selectRedirect).directive("shoutOutModal",Y.shoutOutModal).directive("stickyResults",X.stickyResults).directive("stateSelect",K.stateSelect).directive("stickyHeader",Z.stickyHeader).directive("stickySectionNavigation",J.stickySectionNavigation).directive("stickyTable",ee.stickyTable).directive("search",W.search).directive("searchbox",H.searchbox).directive("tooltip",te.tooltip).directive("unitSelector",ie.unitSelector).directive("user",re.user).directive("userProfile",oe.userProfile).directive("utilitiesNavbar",ne.utilitiesNavbar).filter("booleanValue",ce.BooleanValueFilter).filter("priceAndCurrency",Ce.PriceAndCurrencyFilter).filter("isArray",ve.IsArrayFilter).filter("numberPrecision",Se.NumberPrecision).filter("unitGroup",Fe.UnitGroupFilter)}(r||(r={}))},function(e,t){"use strict";function i(e,t){return{restrict:"A",scope:!0,controller:r,controllerAs:"ajaxForm",bindToController:!0,link:function(i,r){r.hasClass("modal")&&r.on("hide.bs.modal",function(){e.get("/headless/?"+r.attr("data-reset-action-param")).then(function(e){var i=angular.element("#"+r.attr("data-replace-id")),o=e.data.toString();i.html(o),t(i.contents())(i.scope())})})}}}i.$inject=["$http","$compile"],t.ajaxForm=i;var r=function(){function e(e,t){this.$http=e,this.$compile=t}return e.$inject=["$http","$compile"],e.prototype.send=function(e,t){var i=this,r=angular.element("#"+e),o=new FormData(document.getElementById(e));this.$http({method:"POST",url:"/headless"+r.attr("action"),transformRequest:angular.identity,headers:{"Content-Type":void 0},data:o}).then(function(e){var r=angular.element("#"+t),o=r.scope(),n=e.data.toString();r.html(n),i.$compile(r.contents())(o)})},e}();t.AjaxFormController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){t.find("a.active").parent().siblings("ul").show()}}}t.asideTreeNav=i},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,bindToController:{attribute:"<"},templateUrl:"templates/directives/filter/attribute/descriptionModal.html",replace:!0,controller:r,controllerAs:"descModCtrl"}}t.attributeDescriptionModal=i;var r=function(){function e(e,t){var i=this;this.descriptionHtml=e.trustAsHtml(this.attribute.description),this.categoriesDefiningAttributeAsFilter=_.chain(t.categories).filter(function(e){return e.search_attributes.indexOf(i.attribute.uid)>-1&&101!==e.doktype&&1===e.category_path_array.length}).map("title").value()}return e.$inject=["$sce","CategoriesService"],e}();t.DescriptionModalController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"basket",bindToController:!0}}t.basket=i;var r=function(){function e(e,t,i){this.BasketService=e,this.CurrentConfigurationService=t,this.$window=i,this.newLineItem={amount:1,loading:!1,singlePrice:0,newAmount:1,price:0,articles:[{uid:0}]}}return e.$inject=["BasketService","CurrentConfigurationService","$window"],e.prototype.toggleBasket=function(){this.BasketService.toggleBasket()},e.prototype.closeBasket=function(){this.BasketService.isCartOpen()&&this.BasketService.toggleBasket()},e.prototype.isOpen=function(){return this.BasketService.isCartOpen()},e.prototype.addLineItem=function(e){this.BasketService.addLineItem(e,"")},e.prototype.addLineItemAndShowModal=function(e){var t=e.articles[0].uid;this.BasketService.addLineItem(e,"toBasketModal"+t.toString())},e.prototype.addLineItemAndGoToUrl=function(e,t){this.BasketService.addLineItem(e,"",!1),this.$window.location.href=t},e.prototype.addConfigurationLineItem=function(e,t){void 0===t&&(t=1);var i={amount:t,loading:!1,singlePrice:0,newAmount:1,price:0,configurationIdentifier:e,isConfiguration:!0,articles:[{uid:0}]};this.addLineItem(i),this.CurrentConfigurationService.dirty=!1},e.prototype.setAmount=function(e){e.loading=!0,this.BasketService.setLineItemAmount(e,e.newAmount)},e.prototype.lineItems=function(){return this.BasketService.getLineItems()},e.prototype.removeLineItem=function(e){this.lineItemOnTheBrink=null,this.BasketService.setLineItemAmount(e,0)},e.prototype.removeLineItemWithConfirmation=function(e,t){this.lineItemOnTheBrink=e,angular.element("#"+t).modal()},e.prototype.clearLineItemFromModal=function(e){this.removeLineItem(this.lineItemOnTheBrink),angular.element("#"+e).modal("hide")},e.prototype.clear=function(){this.BasketService.clear()},e.prototype.basketLoaded=function(){return this.BasketService.basketLoaded},e.prototype.setAmountOnEnter=function(e,t){13===e.keyCode&&this.setAmount(t)},e.prototype.clearFromModal=function(e){this.clear(),angular.element("#"+e).modal("hide")},e}();t.BasketController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"checkout",bindToController:!0}}t.checkout=i;var r=function(){function e(e,t){this.useDeliveryAddress=!1,this.formLoading=!1,this.currentStep=1;var i=window.location.hash,r=i.indexOf("#"),o=-1!==r?i.substring(r+1):"";"checkoutStep"===o.substring(0,12)?this.currentStep=_.toNumber(o.substring(12,13)):this.currentStep=1,t(function(){e.$broadcast("checkUserDomain")},0)}return e.$inject=["$rootScope","$timeout"],e.prototype.goToStep=function(e,t){void 0===t&&(t=null),t&&t.preventDefault(),this.currentStep=e,this.formLoading=!1,setTimeout(function(){var t=angular.element("#checkoutStep"+e.toString());return t?(angular.element("html, body").animate({scrollTop:t.offset().top-120},500),!1):void 0},500)},e.prototype.validateStep=function(){this.formLoading=!0,this.ajaxFormCtrl.send("checkoutForm","checkoutFormContainer")},e.prototype.backToStep=function(e){2===e||3===e?(angular.element("#currentStepInput").val((e-1).toString()),this.validateStep()):this.goToStep(e,null)},e}();t.CheckoutController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){var i=t.find(".tec-tab-button"),r=t.find(".tec-tabs-container .tec-tab-item");i.on("click",function(e){e.preventDefault();var t=$(this).index();i.removeClass("is-active"),r.removeClass("is-active"),$(this).addClass("is-active"),r.eq(t).addClass("is-active")})}}}t.collapseTabs=i},function(e,t,i){"use strict";function r(){return{restrict:"A",scope:!0,controller:s,controllerAs:"configuratorCtrl",bindToController:{languageIndex:"@",initialConfigurationIdentifier:"@",initial:"&",attributes:"<",categories:"<"},link:function(e,t){angular.element("#tec-tab-attributes").find(".is-btn-more").on("click",function(){angular.element("#tec-tab-attributes").find(".is-more").slideToggle()})}}}var o=i(11),n=i(13);t.configurator=r;var s=function(){function e(e,t,i,r,o,n){this.$rootScope=e,this.CurrentConfigurationService=t,this.$timeout=i,this.AttributeService=r,this.CategoriesService=o,this.ElasticConnectionService=n,this._loading=!1,this._finishMode=!1,this._hasError=!1,this._selectionViewMode="table",this.AttributeService.attributes=this.attributes,this.CategoriesService.categories=this.categories,this.ElasticConnectionService.languageIndex=this.languageIndex,this.initialConfigurationIdentifier?this.loadCurrentConfiguration(this.initialConfigurationIdentifier,this.initial):this.CurrentConfigurationService.currentConfigurationIdentifier&&this.loadCurrentConfiguration(this.CurrentConfigurationService.currentConfigurationIdentifier,!1)}return e.$inject=["$rootScope","CurrentConfigurationService","$timeout","AttributeService","CategoriesService","ElasticConnectionService"],Object.defineProperty(e.prototype,"configuration",{get:function(){return this.CurrentConfigurationService.currentConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalConfiguration",{get:function(){return this._finalConfiguration},set:function(e){e&&e.buildArticleList(),this._finalConfiguration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this._loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finishMode",{get:function(){return this._finishMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentOptionGroup",{get:function(){return this._currentOptionGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSlotForSelection",{get:function(){return this._currentSlotForSelection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configurationAvailable",{get:function(){return this.configuration instanceof o.Configuration&&!this._loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasError",{get:function(){return this._hasError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaListAttributeLimit",{get:function(){return n.MEDIA_ROW_ATTRIBUTE_LIMIT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionViewMode",{get:function(){return this._selectionViewMode},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.configuration.emptySlots(),this.loadCurrentConfiguration(this.configuration.identifier,!0)},e.prototype.emptySlot=function(e,t){var i=this;void 0===t&&(t=!0);var r=_.filter(this.configuration.slots,function(t){return _.includes(_.map(e.items,"uid"),t.providerUid)});_.forEach(r,function(e){i.emptySlot(e,!1)}),e.empty(),t&&this.loadCurrentConfiguration(this.configuration.identifier,!1)},e.prototype.startSelectOption=function(e,t){var i=angular.element(".tec-full-page-layover"),r=angular.element("body");i.addClass("is-open"),r.addClass("overflow-hidden"),t.expandRowDetails=[],this.CurrentConfigurationService.dirty=!0,this._currentSlotForSelection=e,this._currentOptionGroup=t,this._currentOptionGroup.columnAttributes=this.columnHeaderAttributes(this._currentOptionGroup)},e.prototype.selectOption=function(e){var t=this;this._loading=!0,this.closeLayover(),this.$timeout(function(){e.options=t.configuration.options,t.CurrentConfigurationService.currentConfiguration=e,t.configuration.clearOptions(),t.configuration.update()}).then(function(){t.$rootScope.$broadcast("curveUpdate",{configuration:t.configuration}),t._loading=!1})},e.prototype.closeLayover=function(){angular.element(".tec-full-page-layover").removeClass("is-open"),angular.element("body").removeClass("overflow-hidden"),this._currentSlotForSelection=null,this._currentOptionGroup=null},e.prototype.openListOptions=function(e){var t=angular.element(e.currentTarget.parentElement.offsetParent),i=t.find(".tec-conf-list-opts"),r=angular.element(".tec-configurator .tec-conf-container"),o=angular.element(".tec-configurator .tec-table"),n=t.data("direction"),s=i.width()+25;switch(r.addClass("overflow-hide"),i.addClass("is-block is-show"),n){case"left":o.css({transform:"translateX("+s+"px)"});break;case"right":o.css({transform:"translateX("+-s+"px)"})}},e.prototype.closeListOptions=function(e){var t=angular.element(e.currentTarget.parentElement.offsetParent),i=t.find(".tec-conf-list-opts"),r=angular.element(".tec-configurator .tec-conf-container"),o=angular.element(".tec-configurator .tec-table");i.removeClass("is-show"),o.css("transform","translateX(0)"),setTimeout(function(){i.removeClass("is-block"),r.removeClass("overflow-hide").removeAttr("style")},800)},e.prototype.finish=function(){this.configuration.finishable?(this._finishMode=!0,this.configuration.rootNode.fuzzy||(this.finalConfiguration=this.configuration),angular.element("#configuratorFinishModal").modal("show")):alert("Please select at least one option.")},e.prototype.closeFinish=function(){angular.element("#configuratorFinishModal").modal("hide"),this.finalConfiguration=null,this._finishMode=!1},e.prototype.displaySelectionAsMedia=function(){this._selectionViewMode="media"},e.prototype.displaySelectionAsTable=function(){this._selectionViewMode="table"},e.prototype.sortSelectionTableByAttribute=function(e){_.forEach(this._currentOptionGroup.columnAttributes,function(t){t.uid!==e.uid&&(t.sorting="none")}),this._currentOptionGroup.priceSorting="none",e.sortable&&(this._currentOptionGroup.options=_.sortBy(this._currentOptionGroup.options,function(t){var i=_.find(t.item.attributes,{uid:e.uid});return i?_.isArray(i.value)?i.value[0]:i.value:"desc"===e.sorting?-9999999:9999999}),"asc"===e.sorting?(e.sorting="desc",this._currentOptionGroup.options.reverse()):e.sorting="asc")},e.prototype.sortSelectionTableByPrice=function(){_.forEach(this._currentOptionGroup.columnAttributes,function(e){e.sorting="none"}),this._currentOptionGroup.options=_.sortBy(this._currentOptionGroup.options,function(e){return e.item.price}),"asc"===this._currentOptionGroup.priceSorting?(this._currentOptionGroup.priceSorting="desc",this._currentOptionGroup.options.reverse()):this._currentOptionGroup.priceSorting="asc"},e.prototype.columnAttributes=function(e,t){var i=[];return _.forEach(t.search_attributes,function(t){i.push(_.find(e.attributes,{uid:t}))}),i},e.prototype.columnHeaderAttributes=function(e){var t=_.uniqBy(_.unionBy(_.flatten(_.map(e.options,"item.attributes")),"uid"),"uid"),i=[];return _.forEach(e.category.search_attributes,function(e){i.push(_.find(t,{uid:e}))}),i},e.prototype.hasCurves=function(){return this.configuration instanceof o.Configuration&&this.configuration.hasCurves()},e.prototype.highestCategory=function(e){return this.CategoriesService.highestCategory(e)},e.prototype.deepestCategory=function(e){return this.CategoriesService.deepestCategory(e)},e.prototype.nodeTitle=function(e){if(e.fuzzySiblings&&e.fuzzySiblings.length>0&&e.fuzzy){var t=e.title.split("-");return t[0]+"-&#8230;"}return e.title},e.prototype.fuzzyOptions=function(){return this.configuration.rootNode.fuzzy?this.configuration.filterOptions(!0):[this.configuration]},e.prototype.differentValueAttributes=function(e,t){return _.filter(t.attributes,function(t){var i=!1;return _.forEach(e,function(e){var r=_.find(e.attributes,{uid:t.uid});return r?_.toString(r.value)!==_.toString(t.value)?(i=!0,!1):void 0:(i=!0,!1)}),i})},e.prototype.loadCurrentConfiguration=function(e,t,i){var r=this;void 0===t&&(t=!1),void 0===i&&(i=null),this._loading=!0;var n,s,a=_.filter(e.split("::"),function(e){return e.length>0}),u=1===a.length;if(u){var c=[_.toNumber(a[0])];i instanceof o.Configuration&&(c=c.concat(i.rootNode.fuzzySiblings)),s={bool:{must:[{regexp:{identifier:"("+c.join("|")+")::.*"}},{term:{_type:"combined"}}]}}}else s={term:{_id:e}};this.executeSearchAndReturnDeferrer(s,1,["identifier"]).then(function(e){var t=_.map(e.hits.hits,"_source");return t[0]?(u?(t[0].attributes=t[0].rootNode.attributes,n=new o.Configuration(t[0],r.AttributeService,r.CategoriesService),n.emptySlots()):n=new o.Configuration(t[0],r.AttributeService,r.CategoriesService),n.hasImpliedFuzzyNodes()&&!i?void r.loadCurrentConfiguration(n.identifier,u,n):r.getLoadOptionsDeferrer(n)):(r._hasError=!0,r._errorCode=1489158372218,r._loading=!1,void 0)},function(){r._hasError=!0,r._errorCode=1489158052827,r._loading=!1}).then(function(e){e&&(n.initializeOptions(_.map(e.hits.hits,"_source")),t?r.CurrentConfigurationService.newConfiguration=n:r.CurrentConfigurationService.currentConfiguration=n,r.$rootScope.$broadcast("curveUpdate",{configuration:r.configuration}),r._loading=!1)},function(){r._hasError=!0,r._errorCode=1489158046594,r._loading=!1})},e.prototype.executeSearchAndReturnDeferrer=function(e,t,i){return this.ElasticConnectionService.client.search({index:this.ElasticConnectionService.languageIndex,body:{query:e,size:t,sort:i}})},e.prototype.getLoadOptionsDeferrer=function(e){return this.executeSearchAndReturnDeferrer({bool:{must:[{regexp:{identifier:e.identifierRegEx()}},{term:{_type:"combined"}}]}},1e4,["identifier"])},e}();t.ConfiguratorController=s},function(e,t,i){"use strict";var r=i(12),o=i(13),n=function(){function e(e,t,i){var n=this;this._slots=[],this.AttributeService=t,this.CategoriesService=i,this._rootNode=e.rootNode,this._curves=e.curves,this._curveType=e.curveType,this._price=e.price,this._assemblyPrice=e.assemblyPrice,this._mediaListAttributeLimit=o.MEDIA_ROW_ATTRIBUTE_LIMIT,this._attributes=e.attributes,_.forEach(e.slots,function(e){n._slots.push(new r.Slot(e))}),this._attributes=this.processAttributes(this._attributes)}return Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slots",{get:function(){return this._slots},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openLeftSlot",{get:function(){return _.find(this.slots,function(e){return e.available&&e.optionTree.length>0&&e.position===r.SlotDirection.Left})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openRightSlot",{get:function(){return _.find(this.slots,function(e){return e.available&&e.optionTree.length>0&&e.position===r.SlotDirection.Right})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usedLeftSlots",{get:function(){return _.filter(this.slots,function(e){return e.items.length>0&&e.position===r.SlotDirection.Left})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usedRightSlots",{get:function(){return _.filter(this.slots,function(e){return e.items.length>0&&e.position===r.SlotDirection.Right})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usedSlots",{get:function(){return _.filter(this.slots,function(e){return!e.available})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasOpenSlots",{get:function(){return _.some(this.slots,["avaiable",!0])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPrice",{get:function(){return this._price},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPrice",{get:function(){return this._price},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"price",{get:function(){return this._price},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assemblyPrice",{get:function(){return this._assemblyPrice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curves",{get:function(){return this._curves},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curveType",{get:function(){return this._curveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaListAttributeLimit",{get:function(){return this._mediaListAttributeLimit},set:function(e){this._mediaListAttributeLimit=e},enumerable:!0,configurable:!0}),e.prototype.initializeOptions=function(t){var i=this;this._options=[],_.forEach(t,function(t){i._options.push(new e(t,i.AttributeService,i.CategoriesService))}),this.update()},Object.defineProperty(e.prototype,"attributes",{get:function(){return this._attributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){var e=this._rootNode.uid.toString()+"::",t=_.map(this.usedSlots,function(e){return e.slotAttributeUid.toString()+"_"+e.providerUid.toString()+":"+_.map(e.items,"identifier").join(",")});return e+t.join(";")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finishable",{get:function(){return _.some(this._slots,function(e){return e.items.length>0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"articleList",{get:function(){return this._articleList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"articles",{get:function(){return _.map(this._articleList,"article")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"existingProviderIdentifiers",{get:function(){return _.flatten(_.map(this.usedSlots,function(e){return _.map(e.items,"uid")})).concat([this.rootNode.uid].concat(this.rootNode.fuzzySiblings))},enumerable:!0,configurable:!0}),e.prototype.emptySlots=function(){this._slots=_.map(_.filter(this._slots,["providerUid",this._rootNode.uid]),function(e){return e.empty(),e}),this.update()},e.prototype.hasCurves=function(){return this._curves.length>0},e.prototype.hasImpliedFuzzyNodes=function(){return _.some(this.allItems(!0),function(e){return e.fuzzySiblings&&e.fuzzySiblings.length>0})},e.prototype.update=function(){this.buildOptionTree(),this.buildArticleList(),this.checkFuzziness()},e.prototype.clearOptions=function(){this.options=this.filterOptions(!1)},e.prototype.filterOptions=function(e){var t=this;return void 0===e&&(e=!1),_.filter(this._options,function(i){if(!_.includes(t.rootNode.fuzzySiblings.concat([t.rootNode.uid]),i.rootNode.uid)||e&&i.usedSlots.length!==t.usedSlots.length||!e&&i.usedSlots.length<t.usedSlots.length)return!1;var r=!0;return _.forEach(t.usedSlots,function(e){var o,n=!1;return o=e.providerUid===t.rootNode.uid?t.rootNode.fuzzySiblings.concat([t.rootNode.uid]):[e.providerUid],_.forEach(i.usedSlots,function(t){return t.slotAttributeUid===e.slotAttributeUid&&_.includes(o,t.providerUid)&&_.map(_.sortBy(t.items,"identifier"),"identifier").join(",")===_.map(_.sortBy(e.items,"identifier"),"identifier").join(",")?(n=!0,!1):void 0}),n?void 0:(r=!1,!1)}),r})},e.prototype.identifierRegEx=function(e){var t=this;void 0===e&&(e=!1);var i="("+[this.rootNode.uid].concat(this.rootNode.fuzzySiblings).join("|")+")::",r=[],o="(;?[0-9]+_([0-9):(,?[0-9]+)+)*";return _.forEach(this.slots,function(e){if(e.items.length>0){var i=_.find(t.allItems(!0),{uid:e.providerUid}),n=void 0;n=i.fuzzySiblings&&i.fuzzySiblings.length>0?"_("+[i.uid].concat(i.fuzzySiblings).join("|")+"):":"_"+i.uid+":",r.push(o+"(;?"+e.slotAttributeUid+n+_.map(e.items,"uid").join(",")+"){1}")}}),e?i+r.join("")+"$":i+r.join("")+o},e.prototype.buildArticleList=function(){var e=this;this._articleList=[{article:this._rootNode,amount:1}],_.forEach(this.allItems(),function(t){var i=_.find(e._articleList,["uid",t.uid]);i?i.amount++:e._articleList.push({article:t,amount:1})})},e.prototype.buildOptionTree=function(){var e=this,t=[];if(this.rootNode.fuzzySiblings&&this.rootNode.fuzzySiblings.length>0){var i=_.map(this._options,"identifier");t=_.filter(this.options,function(t){if(t.rootNode.uid===e.rootNode.uid)return!0;var r=t.identifier.replace(t.rootNode.uid+"::",e.rootNode.uid+"::").replace("_"+t.rootNode.uid,"_"+e.rootNode.uid);return!_.includes(i,r)})}else t=this.options;_.forEach(t,function(t){var i=_.filter(t.slots,function(t){return _.some(t.items,function(t){return!_.includes(_.map(e.allItems(!1),"uid"),t.uid)})});if(1===i.length){var o=i.pop();if(_.includes(e.existingProviderIdentifiers,o.providerUid)){var n=_.find(e.slots,function(t){return o.slotAttributeUid===t.slotAttributeUid&&(o.providerUid===t.providerUid||_.includes(e.rootNode.fuzzySiblings.concat([e.rootNode.uid]),t.providerUid)&&_.includes(e.rootNode.fuzzySiblings.concat([e.rootNode.uid]),o.providerUid))&&o.position===t.position&&t.available});_.isUndefined(n)&&(n=new r.Slot(o),n.empty(),n.optionTree=[],e.slots.push(n)),_.forEach(o.items,function(i){var r=_.find(n.optionTree,function(t){return t.category&&t.category.uid===e.CategoriesService.highestCategory(i).uid});_.isUndefined(r)&&(r={category:e.CategoriesService.highestCategory(i),options:[]},n.optionTree.push(r)),_.some(r.options,function(e){return e.item.uid===i.uid})||(i.attributes=e.processAttributes(i.attributes),i.mediaListAttributeLimit=e._mediaListAttributeLimit,r.options.push({item:i,configuration:t}))})}}})},e.prototype.allItems=function(e){void 0===e&&(e=!1);var t=[];return e&&t.push(this.rootNode),_.forEach(this._slots,function(e){_.forEach(e.items,function(e){t.push(e)})}),t},e.prototype.processAttributes=function(e){var t=this;return _.chain(e).map(function(e,i){var r=_.clone(_.find(t.AttributeService.attributes,{uid:parseInt(i,10)}));return _.isUndefined(r)?void 0:(r.value=e,r)}).flatten().value()},e.prototype.checkFuzziness=function(){var e=this;this.rootNode.fuzzy=!1,this.rootNode.fuzzySiblings&&this.rootNode.fuzzySiblings.length>0&&_.some(this.options,function(t){return _.includes(e.rootNode.fuzzySiblings,t.rootNode.uid)})&&(this.rootNode.fuzzy=!0)},e}();t.Configuration=n},function(e,t){"use strict";var i;!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom"}(i=t.SlotDirection||(t.SlotDirection={}));var r=function(){function e(e){this._fuzzy=!1,this._slotAttributeUid=e.slotAttributeUid,this._openSeats=e.openSeats,this._position=e.position,this._available=e.available,this._items=e.items,this._providerUid=e.providerUid,this._optionTree=[]}return Object.defineProperty(e.prototype,"slotAttributeUid",{get:function(){return this._slotAttributeUid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openSeats",{get:function(){return this._openSeats},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"available",{get:function(){return this._available},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerUid",{get:function(){return this._providerUid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fuzzy",{get:function(){return this._fuzzy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionTree",{get:function(){return this._optionTree},set:function(e){this._optionTree=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.slotAttributeUid+"_"+this.providerUid},enumerable:!0,configurable:!0}),e.prototype.signature=function(e){return void 0===e&&(e=!1),e?this.identifier+":"+_.map(_.sortBy(this._items,"identifier"),"identifier").join(","):this.identifier+":"+_.map(_.sortBy(this._items,"identifier"),"identifier").join(",")},e.prototype.empty=function(){this._openSeats=this._openSeats+this._items.length,this._items=[],this._available=this._openSeats>0},e}();t.Slot=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!1,require:"^productFinder",templateUrl:"templates/directives/results/media.html"}}t.MEDIA_ROW_ATTRIBUTE_LIMIT=6,t.resultMedia=i},function(e,t){"use strict";function i(e){return{restrict:"A",scope:!1,link:function(t,i){var r=i.attr("data-article-uid");e.get("/knowledgebaseapi/?tx_nanotec_knowledgebase[article]="+r)}}}i.$inject=["$http"],t.countRead=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"curve",bindToController:{curveType:"@"}}}t.curve=i;var r=function(){function e(e,t,i){var r=this;this.$window=e,this.$rootScope=t,this.$scope=i,this.axesTypesOptions=[{id:1,label:"log/Lin",x:"logarithmic",y:"linear"},{id:2,label:"lin/Lin",x:"linear",y:"linear"},{id:3,label:"lin/log",x:"linear",y:"logarithmic"},{id:4,label:"log/log",x:"logarithmic",y:"logarithmic"}],this.dataRows=[],this.axes=[],this.results=[],this.compare=!1,this.fontSize=11,this.inactiveColor="#cccccc",this.colorPool=["F7931D","49545E","CC1E14","40FF9C","14CC39","FF6540"],this.$rootScope.$on("curveUpdate",function(e,t){if(t){if(t.resultToAdd){var i=1===t.resultToAdd.curveType?1:0;r.curveIdentifier==="compareType"+i&&(r.results.length<6?r.addResult(t.resultToAdd):(t.resultToAdd.compare=!1,angular.element("#toManyArticlesInCompareModal").modal("show")))}t.resultToRemove&&r.curveIdentifier==="compareType"+t.resultToRemove.curveType&&r.removeResult(t.resultToRemove,!1),
t.configuration&&t.configuration.curves&&t.configuration.curves.length>0&&(r.dataRows=t.configuration.curves,r.curveType=t.configuration.curveType,t.curveIdentifier?r.curveIdentifier=t.curveIdentifier:r.curveIdentifier="configuration",r.title=r.dataRows[0].datarowName),t.afterDraw&&(r._afterDrawCallback=function(){t.afterDraw(),r._afterDrawCallback=void 0}),t.comparePoint&&(r.comparePoint=t.comparePoint)}r.init()})}return e.$inject=["$window","$rootScope","$scope"],e.round=function(e){if(100>e&&e>0){var t=Math.ceil(Math.log(Math.ceil(1/e))/Math.log(10))+2;return parseFloat(e.toFixed(t))}return Math.round(e)},e.prototype.init=function(e){var t=this;if(void 0===e&&(e=""),e&&(this.curveIdentifier=String(e)),"compare"===this.curveIdentifier.substr(0,7)?this.compare=!0:0===this.dataRows.length&&(this.dataRows=this.$window.curveData[this.curveIdentifier].dataRows),this.curveIdentifier.length>0&&this.$window.curveData[this.curveIdentifier]&&this.dataRows.length>0){var i="1"===this.curveType?1:0;this.axes=this.$window.curveAxes[i],this.title||(this.title=this.$window.curveData[this.curveIdentifier].title||""),this.axesTypes=this.axesTypesOptions[0];var r=[];_.forEach(this.dataRows,function(e){e.show=!0,_.forEach(e.curveData,function(e,i){r.push(i),e.show=!_.find(t.axes,{key:i}).hidden})}),this.axes=_.filter(this.axes,function(e){return _.includes(r,e.key)}),this.setVoltageOptions(),"2"===this.curveType?this.switchAxes():(this.draw(),this.compare&&(this.$scope.$watch(function(){return t.comparePoint},function(){t.drawComparePlotLine()}),this.panelTitle=this.$window.curveData[this.curveIdentifier].title))}else this.destroy()},e.prototype.getColor=function(e){return"#"+this.colorPool[e-1]},e.prototype.getColorShade=function(e,t,i){var r=i>1?.6/(i-1):0,o=r*(t-1),n=parseInt(e,16),s=0>o?0:255,a=0>o?-1*o:o,u=n>>16,c=n>>8&255,l=255&n;return"#"+(16777216+65536*(Math.round((s-u)*a)+u)+256*(Math.round((s-c)*a)+c)+(Math.round((s-l)*a)+l)).toString(16).slice(1)},e.prototype.getCurveSelectorColor=function(e,t,i){var r,o=i,n=1;return this.compare&&e.result?(o=0,n=e.result.curves.length,r=e.result.color,_.forEach(this.dataRows,function(t,r){return t.result.identifier===e.result.identifier&&o++,r+1===i?!1:void 0})):r=this.colorPool[i],e.curveData[t]&&e.curveData[t].show?r?this.getColorShade(r,o,n):this.getColor(o):this.inactiveColor},e.prototype.getYAxesData=function(){return _.sortBy(_.filter(this.axes,{axis:"y"}),"sorting")},e.prototype.toggleCurve=function(e,t){e.curveData[t].show=!e.curveData[t].show,this.draw()},e.prototype.toggleAllCurvesOnAxis=function(e){var t=!0;_.forEach(this.dataRows,function(i){_.forEach(i.curveData,function(i,r){r===e.key&&i.show&&(t=!1)})}),_.forEach(this.dataRows,function(i){_.forEach(i.curveData,function(i,r){r===e.key&&(i.show=t)})}),this.draw()},e.prototype.toogleDataRow=function(e){var t=!0;_.forEach(e.curveData,function(e){e.show&&(t=!1)}),_.forEach(e.curveData,function(e){e.show=t}),this.draw()},e.prototype.setVoltageOptions=function(){var e=_.uniq(_.map(this.dataRows,"voltage")).sort();this.voltageOptions=_.map(e,function(e){return{value:e,selected:!0}})},e.prototype.addResult=function(e){var t=this,i=_.map(this.results,"color");e.color=_.difference(this.colorPool,i)[0],this.results.push(e),_.forEach(e.curves,function(i){i.result=e,t.dataRows.push(i)})},e.prototype.removeResult=function(e,t){void 0===t&&(t=!0),_.remove(this.results,function(t){return t.identifier===e.identifier}),this.dataRows=_.filter(this.dataRows,function(t){return t.result.identifier!==e.identifier}),e.compare=!1,0===this.dataRows.length?this.$rootScope.$broadcast("closeCompareLayover"):t&&this.draw()},e.prototype.removeDataRow=function(e){this.dataRows=_.filter(this.dataRows,function(t){return t.datarowName!==e.datarowName}),0===this.dataRows.length?this.$rootScope.$broadcast("closeCompareLayover"):this.draw()},e.prototype.exportPdf=function(){this.chart.exportChart({type:"application/pdf",filename:this.title.split(" ")[0]})},e.prototype.switchAxes=function(){this.axesExchanged=!this.axesExchanged,this.comparePoint=0,_.forEach(this.axes,function(e){e.switchable&&("y"===e.axis?e.axis="x":e.axis="y")}),this.draw()},e.prototype.filterVoltage=function(){var e=this;_.forEach(this.voltageOptions,function(t){_.forEach(e.dataRows,function(e){e.voltage===t.value&&(e.show=t.selected)})}),this.draw()},e.prototype.drawComparePlotLine=function(){_.head(this.chart.xAxis).removePlotLine("comparePoint"),this.comparePoint&&_.head(this.chart.xAxis).addPlotLine({id:"comparePoint",color:"red",dashStyle:"solid",value:this.comparePoint,width:2,zIndex:5})},e.prototype.calculateValueAtPoint=function(t){var i=_.head(this.yAxes),r="speed";("speed"===i.id||"torqueX"===i.id)&&(r="torque");var o=t.curveData[i.id].data[r];if(o[0].x>this.comparePoint||o[o.length-1].x<this.comparePoint)return"n/a";for(var n=0;o[n].x<this.comparePoint;)n++;var s=o[n-1],a=o[n],u=(s.y-a.y)/(s.x-a.x),c=s.y-u*s.x,l=u*this.comparePoint+c;return e.round(l)},e.prototype.draw=function(){var t=this;if(this.configureXAxes(),this.configureYAxes(),!this.comparePoint||this.comparePoint<_.head(this.xAxes).min||this.comparePoint>_.head(this.xAxes).max){var i=void 0;i="logarithmic"===this.axesTypes.x?Math.round(_.head(this.xAxes).min+.1*(_.head(this.xAxes).max-_.head(this.xAxes).min)):Math.round((_.head(this.xAxes).min+_.head(this.xAxes).max)/2),this.comparePoint=e.round(i)}var r={chart:{plotBorderWidth:1,plotBorderColor:"#7f7fa0",type:"line",marginRight:16,marginBottom:45},title:{text:null,align:"left",style:{color:"#003a81",fontSize:"15px",fontFamily:"Arial, Helvetica, sans-serif, Verdana, Geneva",fontWeight:"bold"}},tooltip:{enabled:!this.compare,useHTML:!0,borderRadius:0,borderWidth:1,shape:"square",style:{fontSize:"12px",padding:"0",margin:"0"},formatter:function(){var t=this.series,i="";""!==t.controller&&(i='<tr><td style="border: 1px solid '+t.options.color+";font-size:8px; line-height: 8px; color: #ffffff; background-color: "+t.options.color+'; text-align: center; font-weight: normal; padding: 1px 2px;" colspan="2">'+t.options.controller+"</td></tr>");var r='<table border="0" cellpadding="0" cellspacing="0" style="border-collapse:separate; margin: 0; padding: 0; background-color: '+t.options.color+'"><tr><td colspan="2" style="border: 1px solid '+t.options.color+"; padding: 2px 6px 2px 6px; color: #ffffff; background-color: "+t.options.color+'; text-align: center; font-weight: bold;">'+t.options.name+"</td></tr>";return r+='<tr><td style="border: 1px solid '+t.options.color+'; background-color: #ffffff; text-align: right; padding: 2px;">'+t.xAxis.axisTitle.textStr+'</td><td style="border: 1px solid '+t.color+'; background-color: #ffffff; text-align: right; padding: 2px;">'+t.yAxis.axisTitle.textStr+'</td></tr><tr><td style="border: 1px solid '+t.options.color+'; text-align: right; padding: 2px; background-color: #ffffff;">'+e.round(this.point.x)+'</td><td style="border: 1px solid'+t.options.color+'; background-color: #ffffff; text-align: right; padding: 2px;">'+e.round(this.point.y)+"</td></tr>",r+=i+"</table>"}},xAxis:this.xAxes,yAxis:this.yAxes,plotOptions:{series:{animation:!1,enableMouseTracking:!0,marker:{enabled:!1}}},legend:{enabled:!1},credits:{enabled:!1},series:this.getSeries(),exporting:{enabled:!1,sourceWidth:1485,sourceHeight:1050,chartOptions:{title:{text:"Nanotec "+this.title,floating:!1,margin:50},chart:{marginBottom:100},legend:{enabled:!0,backgroundColor:"#ffffff",layout:"horizontal",align:"center",verticalAlign:"bottom",floating:!1}}}};this.compare&&(r.chart.events={click:function(i){var r=i.xAxis[0].value,o=i.xAxis[0].axis;$.each(o.plotLinesAndBands,function(){"comparePoint"===this.id&&this.destroy()}),t.comparePoint=e.round(r),t.drawComparePlotLine()}}),this.chart=Highcharts.chart("highchartsContainer-"+this.curveIdentifier,r,this._afterDrawCallback),this.compare&&this.drawComparePlotLine()},e.prototype.destroy=function(){this.axes=[],this.dataRows=[],this.chart&&this.chart.destroy()},e.prototype.findThresholdForAxis=function(e,t){var i=[];_.forEach(this.dataRows,function(t){_.forEach(t.curveData,function(t,r){r===e.key&&i.push(t)})});var r=_.map(i,function(e){return"min"===t?e.ranges.min:e.ranges.max});return"min"===t?_.min(r):_.max(r)},e.prototype.configureXAxes=function(){var e=_.find(this.axes,{axis:"x",hidden:!1}),t=.9*this.findThresholdForAxis(e,"min"),i=1.1*this.findThresholdForAxis(e,"max");this.xAxes=[{title:{text:e.label,style:{fontWeight:"normal",fontSize:this.fontSize+1+"px","line-height":"50px"}},labels:{style:{fontWeight:"normal",fontSize:this.fontSize+"px"},formatter:function(){var e=0;return this.value<1&&(e=2),Highcharts.numberFormat(this.value,e)}},max:i,min:t,lineWidth:0,gridLineWidth:1,gridLineColor:"#d7d7d7",minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showEmpty:!1,minorTickInterval:"auto",minorTickLength:0,type:this.axesTypes.x}],this.compare&&(this.xAxes[0].crosshair={snap:!1})},e.prototype.configureYAxes=function(){var e=this,t=_.filter(_.sortBy(this.axes,["sorting"]),{axis:"y"});this.yAxes=[],_.forEach(t,function(t){var i={id:t.key,title:{text:t.label,style:{fontWeight:"normal",fontSize:e.fontSize+1+"px",color:"#49545e"}},labels:{style:{fontWeight:"normal",fontSize:e.fontSize+"px"},formatter:function(){var e=0;return this.value<.001&&this.value>0?e=5:this.value<.01&&this.value>0?e=4:this.value<.1&&this.value>0?e=3:this.value<1&&this.value>0?e=2:this.value<10&&this.value>0?e=1:this.value<100&&this.value>0&&(e=0),Highcharts.numberFormat(this.value,e)}},lineWidth:0,gridLineColor:"#d7d7d7",minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showEmpty:!1,minorTickInterval:"auto",minorTickLength:0,type:e.axesTypes.y};i.max=1.1*e.findThresholdForAxis(t,"max"),i.min=0,"efficiency"===t.key&&(i.min=.001,i.max=100),"torque"===t.key||"speed"===t.key||"speedY"===t.key?i.gridLineWidth=1:i.gridLineWidth=0,"logarithmic"===i.type&&i.min<=0&&(i.min=.001),e.yAxes.push(i),_.sortBy(e.yAxes,["sorting"])})},e.prototype.getSeries=function(){var e=this,t=[],i=0,r="speed",o=r;_.forEach(this.axes,function(e){"speed"!==e.key&&"torqueX"!==e.key||"y"!==e.axis||(r="torque"),"x"===e.axis&&(o=e.key)});var n=0;return _.forEach(this.dataRows,function(s){if(s.show){var a=s.curveData,u=s.datarowName;n++;var c=0;_.forEach(a,function(a,l){if(l!==o&&_.includes(_.map(e.yAxes,function(e){return e.id}),l)&&a.show){var p={};p.name=_.find(e.axes,["key",l]).legendLabel+" "+u,p.id=i+"_"+a.sorting+"_"+l,p.type="spline",p.yAxis=l,p.xAxis=0,p.controller=a.controller,p.data=[],p.dashStyle=_.find(e.axes,["key",l]).dashStyle,p.color=e.getCurveSelectorColor(s,l,n),p.data=[],a.data[r].forEach(function(e){if(e){var t={};t.x=e.x,t.y=e.y,p.data.push(t)}}),p.data=_.sortBy(p.data,["x"]),t.push(p),c++}}),i++}}),t},e}();t.CurveController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"currentConfigurationCtrl"}}t.currentConfiguration=i;var r=function(){function e(e,t){this.CurrentConfigurationService=e,this.$scope=t}return e.$inject=["CurrentConfigurationService","$scope"],Object.defineProperty(e.prototype,"show",{get:function(){return!!this.CurrentConfigurationService.currentConfigurationIdentifier&&this.CurrentConfigurationService.dirty},enumerable:!0,configurable:!0}),e.prototype.clearConfiguration=function(){this.CurrentConfigurationService.clear()},e}();t.CurrentConfigurationController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,link:function(e,t){var i=t.find(".label-department"),r=t.find(".label-faculty"),o=t.find(".check-university");o.is(":checked")?(i.hide(),r.show()):(i.show(),r.hide()),o.change(function(){$(this).is(":checked")?(i.hide(),r.show()):(i.show(),r.hide())})}}}t.departmentField=i},function(e,t){"use strict";function i(){return{restrict:"E",scope:{},controller:r,controllerAs:"dTableCtrl",bindToController:{table:"<?",basePrice:"<?"},template:'<div ng-if="dTableCtrl.hasDiscount"><table><tr ng-repeat="discountStep in dTableCtrl.steps"><td>{{discountStep.amountRange}}:</td><td>{{discountStep.price | priceAndCurrency}}</td></tr></table></div>'}}t.discountTable=i;var r=function(){function e(){this._hasDiscount=!1,this.table&&this.table.length>0&&this.basePrice&&(this._hasDiscount=!0,this.calculateSteps())}return e.prototype.calculateSteps=function(){var e=this,t=[{amountRange:"1-"+(this.table[0][0]-1),price:this.basePrice}];angular.forEach(this.table,function(i,r){var o=i[0],n=i[1],s=e.basePrice*((100-n)/100);e.table[r+1]?t.push({amountRange:o+"-"+e.table[r+1][0],price:s}):t.push({amountRange:o+"+",price:s})}),this._steps=t},Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDiscount",{get:function(){return this._hasDiscount},enumerable:!0,configurable:!0}),e}();t.DiscountTableController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"domainSwitcherCtrl",bindToController:!0}}t.domainSwitcher=i;var r=function(){function e(e,t,i,r,o,n,s){var a=this;this.$cookies=e,this.$http=t,this.UserService=i,this.$q=r,this.$window=n,this.$rootScope=s,this.domains=n.domains,this.UserService.ready.then(function(){e.get("do_not_switch_domain")||a.setCountries(),o.$on("checkUserDomain",function(){a.setCountries()})})}return e.$inject=["$cookies","$http","UserService","$q","$scope","$window","$rootScope"],e.prototype.stayOnSite=function(){this.$cookies.put("do_not_switch_domain","1",{domain:document.location.hostname}),this.$rootScope.$broadcast("domainSwitcherModalClosed")},e.prototype.setCountries=function(){var e=this;this.UserService.userExists()?(this.detectionMethod="fe",this.sourceCountryIsoA2=this.UserService.user.countryIso2,this.getCountryInfo()):(this.detectionMethod="ip",this.$http.get("https://freegeoip.net/json/").then(function(t){t.data.country_code?e.sourceCountryIsoA2=t.data.country_code:e.sourceCountryIsoA2="GB",e.getCountryInfo()}))},e.prototype.getCountryInfo=function(){this.getTargetDomain(this.sourceCountryIsoA2),this.getSourceCountry(),this.openModal()},e.prototype.openModal=function(){var e=this;this.targetDomain.substr(0,2)!==location.hostname.substr(0,2)&&("US"===this.sourceCountryIsoA2&&"fe"===this.detectionMethod&&(this.forceMode=!0,angular.element("#domain-switcher-modal").on("hidden.bs.modal",function(){e.$window.location.href="//"+e.targetDomain})),angular.element("#domain-switcher-modal").modal(),this.$rootScope.$broadcast("makeRoomForDomainSwitcherModal"))},e.prototype.getSourceCountry=function(){var e=this;this.$http.get("?type=1463577273&tx_nanotec_angular[action]=getCountryByIsoCode&tx_nanotec_angular[isoCode]="+this.sourceCountryIsoA2).then(function(t){e.sourceCountryGerman=t.data.countryGerman,e.sourceCountryEnglish=t.data.countryEnglish})},e.prototype.getTargetDomain=function(e){-1!==["DE","AT","CH"].indexOf(e)?this.targetDomain=this.domains.de:-1!==["US","CA","MX"].indexOf(e)?this.targetDomain=this.domains.us:"CN"===e?this.targetDomain=this.domains.cn:this.targetDomain=this.domains.en},e}();t.DomainSwitcherController=r},function(e,t){"use strict";function i(e,t){return{restrict:"A",transclude:!0,scope:{id:"@"},template:'<div class="double-scroll-horizontal" ng-class="{\'is-active\':doubleScrollActive}"><div class="dsh-wrapper-scroll"><div class="dsh-scroll" data-ng-style="{width:wrapperScrollWidth}"></div></div><div class="dsh-wrapper-container" data-ng-transclude></div></div>',link:function(i,r){i.wrapperScrollWidth="0px",i.doubleScrollActive=!1;var o=r.children().eq(0),n=o.children().eq(0),s=o.children().eq(1),a=s[0].scrollWidth,u=n[0],c=s[0];n.on("scroll",function(){c.scrollLeft=u.scrollLeft}),s.on("scroll",function(){u.scrollLeft=c.scrollLeft});var l=!0;i.$watch(function(){return i.wrapperScrollWidth=c.scrollWidth+"px"},function(){i.doubleScrollActive=c.scrollWidth>a,e(function(){i.$apply(),l&&(c.scrollLeft=t.get(i.id)||0,u.scrollLeft=t.get(i.id)||0,l=!1)})}),i.$on("$destroy",function(){void 0!==i.id&&t.set(i.id,u.scrollLeft)})}}}i.$inject=["$timeout","$$dsbStorage"],t.doubleScrollBarsHorizontal=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){var i=t.find(".btn-excerpt-more"),r=t.find(".excerpt-large"),o=i.text(),n=i.data("text-less");i.on("click",function(e){e.preventDefault();var t=$(this),s=t.text()===o?n:o;t.fadeOut(function(){r.slideToggle(function(){i.text(s),t.fadeIn()})})})}}}t.excerptMore=i},function(e,t){"use strict";function i(e){return{restrict:"E",scope:!0,replace:!0,controller:r,controllerAs:"attrCtrl",link:function(t,i){var r="templates/directives/filter/attribute/"+t.attrCtrl.attributeFilter.renderType+".html";i.append(e("<ng-include src=\"'"+r+"'\"></ng-include>")(t))},bindToController:{attributeFilter:"<"}}}i.$inject=["$compile"],t.filterAttribute=i;var r=function(){function e(e,t){var i=this;this.AttributeFilterService=e,this.$rootScope=t,this.$rootScope.$on("productFinderCloseFilter",function(){i.attributeFilter.expanded=!1})}return e.$inject=["AttributeFilterService","$rootScope"],Object.defineProperty(e.prototype,"isFiltered",{get:function(){return this.AttributeFilterService.isFiltered(this._attributeFilter.attribute)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribute",{get:function(){return this._attributeFilter.attribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeFilter",{get:function(){return this._attributeFilter},set:function(e){this._attributeFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterText",{get:function(){return this.AttributeFilterService.getFilterText(this.attribute)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"explanation",{get:function(){return _.trim(this._attributeFilter.attribute.description)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canHaveResults",{get:function(){return this._attributeFilter.canHaveResults},enumerable:!0,configurable:!0}),e.prototype.toggle=function(e,t){this.AttributeFilterService.toggle(this._attributeFilter,e,t)},e.prototype.updateRange=function(e,t){this.AttributeFilterService.range(this._attributeFilter,e,t)},e.prototype.reset=function(){this.AttributeFilterService.resetFilterAttribute(this._attributeFilter.attribute)},e.prototype.remove=function(){this.AttributeFilterService.removeFilterAttribute(this._attributeFilter.attribute)},e.prototype.toggleExpand=function(e){var t=e.expanded;this.$rootScope.$broadcast("productFinderCloseFilter"),e.expanded=!t},e}();t.AttributeFilterController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,controller:r,controllerAs:"fboxCtrl",templateUrl:"templates/directives/filterBox.html",bindToController:{expanded:"<"}}}t.filterBox=i;var r=function(){function e(e,t,i,r){var o=this;this.AttributeService=t,this.AttributeFilterService=i,this.CategoriesService=r,this._filteredAttributes=[],e.$on("AttributeFilter:updated",function(){o.updateFilteredAttributes()})}return e.$inject=["$rootScope","AttributeService","AttributeFilterService","CategoriesService"],Object.defineProperty(e.prototype,"filterListActive",{get:function(){return 0!==Object.keys(this.filteredAttributes).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this._expanded=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.AttributeService.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonSelectedAttributes",{get:function(){var e=this;return _.sortBy(_.differenceBy(this.AttributeService.attributes,_.map(this.filteredAttributes,"attribute"),"uid"),function(t){var i=e.AttributeFilterService.attributeIdsByUsage.indexOf(t.uid);return i>-1?i:e.AttributeService.attributes.length})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredAttributes",{get:function(){return this._filteredAttributes},enumerable:!0,configurable:!0}),e.prototype.addAttributeFilter=function(e){this.AttributeFilterService.addFilterAttribute(e)},e.prototype.removeAttributeFilter=function(e){this.AttributeFilterService.removeFilterAttribute(e)},e.prototype.categoriesDefiningAttributeAsFilter=function(e){return _.chain(this.CategoriesService.categories).filter(function(t){return t.search_attributes.indexOf(e.uid)>-1&&101!==t.doktype}).map("title").value()},e.prototype.updateFilteredAttributes=function(){this._filteredAttributes=this.AttributeFilterService.filterAttributes},e}();t.FilterBoxController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,replace:!0,controller:r,controllerAs:"catCtrl",templateUrl:"templates/directives/filter/category.html"}}t.filterCategory=i;var r=function(){function e(e,t,i){var r=this;this.CategoriesService=t,this.$rootScope=i,this._filteredCategories="",this._expanded=!1,e.$on("CategoriesService:reset",function(){r._filteredCategories=""}),e.$on("CategoriesService:updated",function(){r._filteredCategories=r.CategoriesService.filteredCategoryTitles}),this.$rootScope.$on("productFinderCloseFilter",function(){r.expanded=!1})}return e.$inject=["$scope","CategoriesService","$rootScope"],Object.defineProperty(e.prototype,"categoryTree",{get:function(){return this.CategoriesService.categoryTree},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredCategories",{get:function(){return this.CategoriesService.filteredCategoryTitles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCategoriesFiltered",{get:function(){return this.CategoriesService.filteredCategoryUids.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locked",{get:function(){return this.CategoriesService.locked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this._expanded=e},enumerable:!0,configurable:!0}),e.prototype.toggleCategory=function(e){var t=[e.uid];e.children.length>0&&_.map(e.children,function(i){i.filtered=e.filtered,t.push(i.uid)}),e.filtered?this.CategoriesService.addCategoryFilter(t):this.CategoriesService.removeCategoryFilter(t)},e.prototype.reset=function(){this.CategoriesService.reset()},e.prototype.toggleExpand=function(){var e=this.expanded;this.$rootScope.$broadcast("productFinderCloseFilter"),this.expanded=!e},e}();t.CategoryFilterController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,replace:!0,controller:r,controllerAs:"confCtrl",templateUrl:"templates/directives/filter/configuration.html"}}t.filterConfiguration=i;var r=function(){function e(e,t){var i=this;this.ConfigurationFilterService=e,this.$rootScope=t,this._expanded=!1,this.$rootScope.$on("productFinderCloseFilter",function(){i.expanded=!1})}return e.$inject=["ConfigurationFilterService","$rootScope"],Object.defineProperty(e.prototype,"showConfigurations",{get:function(){return this.ConfigurationFilterService.showConfigurations},set:function(e){this.ConfigurationFilterService.showConfigurations=Number(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this._expanded=e},enumerable:!0,configurable:!0}),e.prototype.toggleExpand=function(){var e=this.expanded;this.$rootScope.$broadcast("productFinderCloseFilter"),this.expanded=!e},e}();t.ConfigurationFilterController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,controller:r,controllerAs:"flistCtrl",templateUrl:"templates/directives/filterList.html"}}t.filterList=i;var r=function(){function e(e,t,i,r,o,n,s){this.CategoriesService=e,this.GroupsService=t,this.PriceService=i,this.TorqueSpeedService=r,this.AttributeFilterService=o,this.ConfigurationFilterService=n,this.FilterListService=s}return e.$inject=["CategoriesService","GroupsService","PriceService","TorqueSpeedService","AttributeFilterService","ConfigurationFilterService","FilterListService"],Object.defineProperty(e.prototype,"filterListActive",{get:function(){return this.FilterListService.isShowConfigurationsSet||this.FilterListService.isPriceFiltered||this.FilterListService.isGroupFiltered||this.TorqueSpeedService.isFiltered||this.activeFilterAttributes.length>0||this.FilterListService.isCategoryFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryLocked",{get:function(){return this.CategoriesService.locked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeFilterAttributes",{get:function(){return this.FilterListService.activeFilterAttributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowConfigurationsSet",{get:function(){return this.FilterListService.isShowConfigurationsSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCategoryFiltered",{get:function(){return this.FilterListService.isCategoryFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGroupFiltered",{get:function(){return this.FilterListService.isGroupFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPriceFiltered",{get:function(){return this.FilterListService.isPriceFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torqueAtSpeedAttribute",{get:function(){return this.TorqueSpeedService.attribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTorqueSpeedFiltered",{get:function(){return this.TorqueSpeedService.isFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configurationsShown",{get:function(){return this.ConfigurationFilterService.showConfigurations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryFilter",{get:function(){return this.FilterListService.categoryFilter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torqueSpeedFilter",{get:function(){return this.TorqueSpeedService.filterText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priceFrom",{get:function(){return this.PriceService.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priceTo",{get:function(){return this.PriceService.to},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFilter",{get:function(){return this.GroupsService.filteredGroupTitles},enumerable:!0,configurable:!0}),e.prototype.resetCategories=function(){this.CategoriesService.reset()},e.prototype.resetPrice=function(){this.PriceService.reset()},e.prototype.resetTorqueSpeed=function(){this.TorqueSpeedService.reset()},e.prototype.resetAttribute=function(e){this.AttributeFilterService.resetFilterAttribute(e)},e.prototype.resetConfigurations=function(){this.ConfigurationFilterService.reset()},e}();t.FilterListController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,replace:!0,controller:r,controllerAs:"priceCtrl",templateUrl:"templates/directives/filter/price.html",bindToController:{attribute:"<"}}}t.filterPrice=i;var r=function(){function e(e,t,i){var r=this;this.PriceService=t,this.$rootScope=i,this.value=[0,0],this._min=0,this._max=0,this._from=0,this._to=0,this._isPriceFiltered=!1,this._expanded=!1,t.ready.then(function(){r.updateValuesFromService()}),e.$on("PriceService:updated",function(){r.updateValuesFromService()}),e.$on("PriceService:reset",function(){r.updateValuesFromService()}),this.$rootScope.$on("productFinderCloseFilter",function(){r.expanded=!1})}return e.$inject=["$scope","PriceService","$rootScope"],Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPriceFiltered",{get:function(){return this._isPriceFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribute",{get:function(){return this._attribute},set:function(e){this._attribute=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this._expanded=e},enumerable:!0,configurable:!0}),e.prototype.setPrice=function(){this.PriceService.range=_.map(this.value,function(e){return 100*e})},e.prototype.reset=function(){this.PriceService.reset()},e.prototype.toggleExpand=function(){var e=this.expanded;this.$rootScope.$broadcast("productFinderCloseFilter"),this.expanded=!e},e.prototype.updateValuesFromService=function(){this._min=this.PriceService.min/100,this._max=this.PriceService.max/100,this._from=this.PriceService.from/100,this._to=this.PriceService.to/100,this.value=[this._from,this._to],this._isPriceFiltered=this._min!==this._from||this._max!==this._to},e}();t.PriceFilterController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,replace:!0,controller:r,controllerAs:"tasCtrl",templateUrl:"templates/directives/filter/torqueAtSpeed.html",bindToController:{attribute:"<"}}}t.filterTorqueAtSpeed=i;var r=function(){function e(e,t,i){var r=this;this.$timeout=e,this.TorqueSpeedService=t,this.$rootScope=i,this._dirty=!1,this._expanded=!1,this.syncStateWithService(),this.$rootScope.$on("TorqueSpeedService:update",function(){r.syncStateWithService()}),this.$rootScope.$on("TorqueSpeedService:rangeUpdated",function(){r.syncStateWithService()}),this.$rootScope.$on("TorqueSpeedService:reset",function(){r.syncStateWithService()}),this.$rootScope.$on("productFinderCloseFilter",function(){r.expanded=!1})}return e.$inject=["$timeout","TorqueSpeedService","$rootScope"],e.prototype.reset=function(){this.TorqueSpeedService.reset(),this.syncStateWithService()},e.prototype.toggleExpand=function(){var e=this.expanded;this.$rootScope.$broadcast("productFinderCloseFilter"),this.expanded=!e},e.prototype.apply=function(){var e=angular.copy(this._torque),t=angular.copy(this._speed);_.isNumber(t)||(t=_.isNumber(this._lastValidSpeed)?this._lastValidSpeed:Math.round(this.TorqueSpeedService.speedRange[0]+(this.TorqueSpeedService.speedRange[1]-this.TorqueSpeedService.speedRange[0])/2)),this.TorqueSpeedService.torque=e,this.TorqueSpeedService.speed=t,this._dirty=!1},e.prototype.syncStateWithService=function(){this._dirty=!1,this._torque=angular.copy(this.TorqueSpeedService.torque),this._speed=angular.copy(this.TorqueSpeedService.speed)},Object.defineProperty(e.prototype,"attribute",{get:function(){return this._attribute},set:function(e){this._attribute=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minSpeed",{get:function(){return this.TorqueSpeedService.speedRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSpeed",{get:function(){return this.TorqueSpeedService.speedRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minTorque",{get:function(){return this.TorqueSpeedService.torqueRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTorque",{get:function(){return this.TorqueSpeedService.torqueRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(e){var t=this;_.isNumber(e)?this._validValueTimer&&this.$timeout.cancel(this._validValueTimer):(this._lastValidSpeed=angular.copy(this._speed),this._validValueTimer=this.$timeout(function(){t._speed=t._lastValidSpeed},300)),this._speed=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torque",{get:function(){return this._torque},set:function(e){this._torque=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromTorque",{
get:function(){return this._torque[0]},set:function(e){e>this.toTorque?this.torque=[e,e]:this.torque=[e,this.toTorque]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toTorque",{get:function(){return this._torque[1]},set:function(e){e<this.fromTorque?this.torque=[e,e]:this.torque=[this.fromTorque,e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFiltered",{get:function(){return this.TorqueSpeedService.isFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterText",{get:function(){return this.TorqueSpeedService.filterText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this._expanded=e},enumerable:!0,configurable:!0}),e}();t.TorqueAtSpeedFilterController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"fMenuItem",bindToController:!0}}t.footerNavItem=i;var r=function(){function e(e){this.$window=e,this.open=!1}return e.$inject=["$window"],e.prototype.toggleMenuItem=function(e){this.$window.innerWidth<=991&&(this.open=!this.open,e.preventDefault(),e.stopPropagation())},e.prototype.isOpen=function(){return this.open},e}();t.FooterMenuController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){var i="is-open",r="overflow-hidden",o=t[0].getAttribute("data-target"),n=angular.element(o),s=n.find(".is-close");t.click(function(){return n.length&&(n.addClass(i),angular.element("body").addClass(r)),!1}),s.click(function(){n.removeClass(i),angular.element("body").removeClass(r)}),e.$on("closeCompareLayover",function(){n.removeClass(i),angular.element("body").removeClass(r)})}}}t.fullPageLayover=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){t.DataTable({searching:!1,autoWidth:!1,paging:!1,info:!1})}}}t.jDataTable=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){var i={selector:".list-group-item",selectorHidden:".list-group-item.is-hidden",button:".list-group-actions .btn",btnTextClass:".text",btnIconShow:"icon-chevron-medium-thin-bottom",btnIconHidden:"icon-chevron-medium-thin-top",selectorHeight:54,speed:500,prefixRowClass:"is-rows-",selectorHeightOffset:1},r=!1;t.find(i.button).on("click",function(){var e=$(this),o=e.find("i").attr("class")===i.btnIconShow?i.btnIconHidden:i.btnIconShow,n=e.data("text-more"),s=e.data("text-less"),a=e.find(i.btnTextClass).text()===n?s:n;return r=r===!0?!1:!0,e.find(i.btnTextClass).text(a),e.find("i").removeClass().addClass(o),t.find(i.selectorHidden).slideToggle(i.speed),!1})}}}t.listActions=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"mainNavigationItemCtrl",bindToController:!0}}t.mainNavigationItem=i;var r=function(){function e(e){this.$window=e,this.open=!1}return e.$inject=["$window"],e.prototype.toggleMenuItem=function(e){if(this.$window.innerWidth<=991){var t=angular.element(e.target).siblings(".menu").find("ul li");t.length>0&&(e.preventDefault(),e.stopPropagation()),this.open=!this.open}},e.prototype.isOpen=function(){return this.open},e}();t.MainMenuController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"mNav",bindToController:!0}}t.mobileNav=i;var r=function(){function e(e){this.MobileNavService=e}return e.$inject=["MobileNavService"],e.prototype.toggleMobileNav=function(){this.MobileNavService.toggle()},e.prototype.isOpen=function(){return this.MobileNavService.isOpen()},e}();t.MobileNavController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"locations",bindToController:!0}}t.locations=i;var r=function(){function e(e,t){var i=this;this.$window=e,this.$http=t,this.locations=e.nanotecLocations,this.types=[0,1,2],this.countries=_.sortBy(_.uniqBy(_.flatten(_.map(this.locations,"countries")),"isoCode2"),"title"),this.continents=_.sortBy(_.uniqBy(_.flatten(_.map(this.locations,"continents")),"nameLocalized")),this.googleMap=new google.maps.Map(document.getElementById("map"),{center:{lat:48.1550039,lng:11.4717968},scrollwheel:!1,zoom:2,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]});var r={0:"#49545e",1:"#F7931D",2:"#5984c6"};this.$http.get("https://freegeoip.net/json/").then(function(e){for(var t=6371,o=function(o){o.marker=new google.maps.Marker({position:new google.maps.LatLng(o.latitude,o.longitude),map:i.googleMap,icon:{path:"M16,0.7c6.4,0,11.5,5.2,11.5,11.5c0,5.2-3.4,9.5-8,11L16,31.3l-3.5-8.2c-4.6-1.5-8-5.8-8-11C4.5,5.8,9.6,0.7,16,0.7z M11,17.9c1.4,1.2,3.1,1.9,5,1.9s3.7-0.7,5-1.9c1.6-1.4,2.6-3.5,2.6-5.8c0-4.3-3.4-7.7-7.7-7.7s-7.7,3.4-7.7,7.7 C8.3,14.4,9.3,16.5,11,17.9z",fillOpacity:.8,fillColor:r[o.type],origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,32),strokeWeight:0,scale:1}}),o.marker.addListener("click",function(){new google.maps.InfoWindow({content:'<div class="location-map-info-window"><small style="color: '+r[o.type]+';">'+i.locationTypes[o.type]+"</small><br><h4>"+o.title+"</h4>"+o.address+"<br></div>"}).open(i.googleMap,o.marker)});var n=(o.longitude*Math.PI/180-e.longitude*Math.PI/180)*Math.cos((o.latitude*Math.PI/180+e.latitude*Math.PI/180)/2),s=o.latitude*Math.PI/180-e.latitude*Math.PI/180;o.distanceToClient=Math.sqrt(n*n+s*s)*t},n=0,s=i.locations;n<s.length;n++){var a=s[n];o(a)}i.selectedLocations=_.sortBy(i.locations,["distanceToClient"])},function(){i.selectedLocations=i.locations})["finally"](function(){i.sortCompanyOnTop()})}return e.$inject=["$window","$http"],e.prototype.highlightOnMap=function(e){e.marker.setMap(this.googleMap),this.googleMap.setCenter({lat:e.latitude,lng:e.longitude}),this.googleMap.setZoom(10)},e.prototype.filter=function(){var e=this;this.selectedLocations=this.locations,this.selectedType&&(this.selectedLocations=_.filter(this.selectedLocations,{type:+this.selectedType})),this.selectedCountry?(this.selectedLocations=_.filter(this.selectedLocations,function(t){var i=_.map(t.countries,"isoCode2");return _.includes(i,e.selectedCountry.isoCode2)}),this.selectedContinent=null):this.selectedContinent&&(this.selectedLocations=_.filter(this.selectedLocations,function(t){var i=_.map(t.continents,"nameLocalized");return _.includes(i,e.selectedContinent.nameLocalized)})),this.googleMap.setCenter({lat:48.1550039,lng:11.4717968}),this.googleMap.setZoom(2),this.sortCompanyOnTop(),this.updateMapMarkers()},e.prototype.search=function(){if(this.searchText.length>=3){this.selectedContinent=null,this.selectedCountry=null,this.selectedType=null,this.selectedLocations=[];for(var e=0,t=this.locations;e<t.length;e++){var i=t[e],r=i.title+i.address+i.description+i.email+i.fax+i.phone;r.toUpperCase().indexOf(this.searchText.toUpperCase())>-1&&this.selectedLocations.push(i)}this.sortCompanyOnTop(),this.updateMapMarkers()}else this.filter()},e.prototype.hasType=function(e){return _.some(this.locations,["type",e])},e.prototype.updateMapMarkers=function(){for(var e=0,t=this.locations;e<t.length;e++){var i=t[e];_.includes(_.map(this.selectedLocations,"uid"),i.uid)?i.marker.setMap(this.googleMap):i.marker.setMap(null)}},e.prototype.sortCompanyOnTop=function(){this.selectedLocations=_.sortBy(this.selectedLocations,function(e){var t;return t=2===e.type?0:3===e.type?1:10})},e}();t.LocationsController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){var i=$(".off-canvas-headline").find(".icon-close"),r=t.attr("href");t.on("click",function(e){e.preventDefault(),$(r).toggleClass("is-open")}),i.on("click",function(e){e.preventDefault();var t=$(this).closest(r);t.removeClass("is-open")})}}}t.offCanvas=i},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,controller:r,controllerAs:"pfinder",bindToController:{languageIndex:"@",config:"<?"}}}t.productFinder=i;var r=function(){function e(e,t,i,r,o,n,s,a,u,c,l){var p=this;this.$rootScope=e,this.ElasticConnectionService=t,this.SearchService=i,this.ResultsService=r,this.TableColumnsService=o,this.$log=s,this.FilterListService=a,this.AttributeService=u,this.GroupsService=c,this.CategoriesService=l,this._defaultConfig={showSearchField:!1,showFilters:!0,filtersExpanded:!0,tableColsLimit:10,resultListLimit:10,categories:[],initialGroups:[],attributes:[],resultStyle:"default",displayStyle:"table"},this._mergedConfig=angular.extend(this._defaultConfig,this.config),this.ElasticConnectionService.languageIndex=this.languageIndex,this.AttributeService.attributes=this._mergedConfig.attributes,this.CategoriesService.categories=this._mergedConfig.categories,this.ResultsService.windowSize=this._mergedConfig.resultListLimit,this.TableColumnsService.colLimit=this._mergedConfig.tableColsLimit,n(function(){p.initialize()},0)}return e.$inject=["$rootScope","ElasticConnectionService","SearchService","ResultsService","TableColumnsService","$timeout","$log","FilterListService","AttributeService","GroupsService","CategoriesService"],Object.defineProperty(e.prototype,"totalResults",{get:function(){return this.ResultsService.totalHits},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSearchField",{get:function(){return this._mergedConfig.showSearchField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFilters",{get:function(){return this._mergedConfig.showFilters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filtersExpanded",{get:function(){return this._mergedConfig.filtersExpanded},set:function(e){this._mergedConfig.filtersExpanded=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayStyle",{get:function(){return this._mergedConfig.displayStyle},set:function(e){this._mergedConfig.displayStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultStyle",{get:function(){return this._mergedConfig.resultStyle},enumerable:!0,configurable:!0}),e.prototype.displayResultsAsTable=function(){this._mergedConfig.displayStyle="table"},e.prototype.displayResultsAsMedia=function(){this._mergedConfig.displayStyle="media"},e.prototype.curvesForCompareSelected=function(){return _.filter(this.ResultsService.displayedResults,["compare",!0]).length>0},e.prototype.filterListActive=function(){return this.FilterListService.filterListActive},e.prototype.initialize=function(){if(this.$log.debug("ProductFinder initialized with configuration",this._mergedConfig),this.SearchService.setQueryPart("default",{term:{hideInShop:!1}}),this._mergedConfig.initialCategories.length>0&&(this.CategoriesService.lock(),this.CategoriesService.addCategoryFilter(this._mergedConfig.initialCategories),this.CategoriesService.modifyTreeFilterState(this._mergedConfig.initialCategories,!0)),this._mergedConfig.initialGroups.length>0&&(this.GroupsService.groups=this._mergedConfig.initialGroups,this.CategoriesService.lock()),this._mergedConfig.initialQuery.length>0){var e=JSON.parse(this._mergedConfig.initialQuery);this.$log.debug("Initial query provided (not yet supported 1473338406)",e)}this.$rootScope.$broadcast("Productfinder:Ready")},Object.defineProperty(e.prototype,"loading",{get:function(){return 1===this.SearchService.state},enumerable:!0,configurable:!0}),e}();t.ProductFinderController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,require:"^productFinder",templateUrl:"templates/directives/resultsConfigurator.html",controller:r,controllerAs:"results"}}t.productFinderResultsConfigurator=i;var r=function(){function e(e,t){var i=this;this.ResultsService=e,this.results=e.displayedResults,t.$on("ResultService:ResultsChanged",function(){i.results=e.displayedResults})}return e.$inject=["ResultsService","$rootScope"],e.prototype.hasMore=function(){return this.ResultsService.hasMore()},e.prototype.showMore=function(){this.ResultsService.showMore()},e}();t.ResultsConfiguratorController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,require:"^productFinder",templateUrl:"templates/directives/resultsDefault.html",controller:r,controllerAs:"resCtrl",bindToController:{displayStyle:"="}}}t.productFinderResultsDefault=i;var r=function(){function e(e,t,i,r,o){var n=this;this.ResultsService=e,this.$rootScope=t,this.$window=i,this.SearchService=r,this.TableColumnsService=o,this._priceSorting="none",this.results=e.displayedResults,this._mediaListAttributeLimit=e.mediaListAttributeLimit,this.expandRowDetails=new Array(this.results.length),_.fill(this.expandRowDetails,!1),this.$rootScope.$on("ResultService:ResultsChanged",function(){n.results=e.displayedResults;var t=n.expandRowDetails.length;n.expandRowDetails.length=n.results.length,n.results.length-t>0&&_.fill(n.expandRowDetails,!1,t)})}return e.$inject=["ResultsService","$rootScope","$window","SearchService","TableColumnsService"],Object.defineProperty(e.prototype,"colLimit",{get:function(){return this.TableColumnsService.colLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnAttributes",{get:function(){return this.TableColumnsService.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priceSorting",{get:function(){return this._priceSorting},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsDisplayed",{get:function(){return this.ResultsService.displayedResults.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResults",{get:function(){return this.ResultsService.totalHits},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaListAttributeLimit",{get:function(){return this._mediaListAttributeLimit},enumerable:!0,configurable:!0}),e.prototype.hasMore=function(){return this.ResultsService.hasMore()},e.prototype.showMore=function(){this.SearchService.loadMore(),this.showMoreSectionContent()},e.prototype.sortByAttribute=function(e){e.sortable!==!1&&(this._priceSorting="none",_.forEach(this.columnAttributes,function(t){t.uid!==e.uid&&delete t.sorting}),e.sorting?"asc"===e.sorting?(e.sorting="desc",this.SearchService.sortByField("attributes."+e.uid,"desc")):(this.SearchService.sortByField("attributes."+e.uid,"none"),delete e.sorting):(e.sorting="asc",this.SearchService.sortByField("attributes."+e.uid,"asc")),this.$rootScope.$broadcast("Productfinder:Sort"))},e.prototype.sortByPrice=function(){_.forEach(this.columnAttributes,function(e){delete e.sorting}),"none"===this._priceSorting?(this._priceSorting="asc",this.SearchService.sortByField("price","asc")):"asc"===this._priceSorting?(this._priceSorting="desc",this.SearchService.sortByField("price","desc")):(this.SearchService.sortByField("price","none"),this._priceSorting="none"),this.$rootScope.$broadcast("Productfinder:Sort")},e.prototype.updateCompare=function(e){if(e.compare&&e.curves&&e.curves.length>0)this.$rootScope.$broadcast("curveUpdate",{resultToAdd:e,resultToRemove:null});else if(!e.compare&&e.curves&&e.curves.length>0){var t=_.map(e.curves,"datarowName");_.remove(this.$window.curveData.compareType0.dataRows,function(e){return _.includes(t,e.datarowName)}),this.$rootScope.$broadcast("curveUpdate",{resultToAdd:null,resultToRemove:e})}},e.prototype.hasCurves=function(){return _.some(this.results,function(e){return e.curves&&e.curves.length>0})},e.prototype.showMoreSectionContent=function(){var e=angular.element("#section-collapse"),t=angular.element(".section-collapse-controls"),i=angular.element(".section-collapse-controls").find(".btn"),r=i.data("text-show"),o=i.data("text-hide");t.addClass("is-show"),e.collapse("hide"),e.on("shown.bs.collapse",function(){i.text(o)}),e.on("hidden.bs.collapse",function(){i.text(r)})},e}();t.ResultsDefaultController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,require:"^productFinder",replace:!0,templateUrl:"templates/directives/results/tableRow.html"}}t.resultTableRow=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,require:"^productFinder",replace:!0,templateUrl:"templates/directives/results/tableRowDetails.html"}}t.resultTableRowDetails=i},function(e,t){"use strict";function i(e){return{restrict:"A",scope:!1,link:function(t,i){function r(){var e=i.find("th"),t=0;s.hasClass("thead-rotated")?(angular.forEach(e,function(e){o=angular.element(e).find(".th-text-display").clone().removeAttr("class").addClass("th-text-only"),n.prepend(o),t=Math.max(t,o.width())}),s.height(Math.ceil(t)),angular.element(".th-text-only").remove()):s.removeAttr("style")}var o,n=i.parent(),s=i.find("tr");t.$on("AttributeFilter:added",function(){e(function(){r()},0,!1)}),t.$on("AttributeFilter:remove",function(){e(function(){r()},0,!1)}),t.$on("Productfinder:Ready",r),t.$watch(function(){return n.is(":visible")},function(){e(function(){r()},0,!1)})}}}i.$inject=["$timeout"],t.resizeTableHeaders=i},function(e,t){"use strict";function i(e){e.debug("runBlock end")}i.$inject=["$log"],t.runBlock=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){t.click(function(){var e=t[0];if(e.hash){var i=$(e.hash);if(i.length)return angular.element("html, body").animate({scrollTop:i.offset().top-120},1e3),!1}})}}}t.scrollToAnchor=i},function(e,t){"use strict";function i(e){return{restrict:"A",scope:!1,link:function(t,i){var r=120;angular.element(e).bind("scroll",function(){e.scrollY>r?i.addClass("is-visible"):i.removeClass("is-visible")}),i.click(function(){return angular.element("html, body").animate({scrollTop:0},1e3),!1})}}}i.$inject=["$window"],t.scrollToTop=i},function(e,t){"use strict";function i(){return{restrict:"E",scope:!0,controller:r,controllerAs:"searchCtrl",bindToController:!0}}t.search=i;var r=function(){function e(e,t){this.$http=e,this.$window=t;var i=10;this.searchWord=t.injectedSearchWord,this.searchForm={searchWord:this.searchWord},this.resultTypes=t.resultTypes,this.error=!1,this.offset=0,this.limit=i,this.searchInProgress=!1,this.typeCount={pages:0,tx_news_domain_model_news:0,knowledge_base:0,sys_file:0,manual:0},void 0!==this.searchForm.searchWord&&this.searchForm.searchWord.length>0&&this.search(!0,!0)}return e.$inject=["$http","$window"],e.prototype.searchMore=function(){this.offset=this.offset+this.limit,this.search(!1,!1)},e.prototype.imageForItem=function(e){return e.imageUrl_stringS?e.imageUrl_stringS:this.$window.dummySearchResultImageUrl},e.prototype.typeLabel=function(e){var t=_.findIndex(this.resultTypes,function(t){return t.type===e.searchType_stringS});return this.resultTypes[t].label},e.prototype.search=function(e,t){var i=this;this.searchInProgress=!0,e&&(this.offset=0,this.searchWord=this.searchForm.searchWord),t&&_.each(this.resultTypes,function(e){e.selected=!1});var r=_.filter(this.resultTypes,{selected:!0});0===r.length&&(r=this.resultTypes);var o="?type=1484130575&q="+encodeURIComponent(this.searchWord)+"&tx_nanotec_search[limit]="+this.limit+"&tx_nanotec_search[offset]="+this.offset+"&tx_nanotec_search[params][fq]="+encodeURIComponent("{!tag=tf}searchType_stringS:("+_.map(r,"type").join(" OR ")+")");this.$http.get(o).then(function(t){i.error=!1,0===i.searchWord.length&&(i.searchWord=i.searchForm.searchWord),e?i.result=t.data.response:i.result.docs=i.result.docs.concat(t.data.response.docs),angular.extend(i.typeCount,i.typeCount,t.data.facet_counts.facet_fields.searchType_stringS),i.searchInProgress=!1})},e}();t.SearchController=r},function(e,t){"use strict";function i(){return{restrict:"E",scope:!1,require:"^productFinder",templateUrl:"templates/directives/searchbox.html"}}t.searchbox=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){t.change(function(){var e=t.find("option:selected").data("href");e&&e.length&&(window.location.href=e)})}}}t.selectRedirect=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"shoutOutModalController",bindToController:{modalId:"@"}}}t.shoutOutModal=i;var r=function(){function e(e,t){var i=this;this.$cookies=e,this.doNotShowAgain=Boolean(this.$cookies.get(this.modalId+"-doNotShowAgain"));var r=angular.element("#"+this.modalId);t.$on("makeRoomForDomainSwitcherModal",function(){r.modal("hide")}),t.$on("domainSwitcherModalClosed",function(){i.doNotShowAgain||r.modal("show")}),this.doNotShowAgain||r.modal("show")}return e.$inject=["$cookies","$scope"],e.prototype.setDoNotShowAgain=function(){this.$cookies.put(this.modalId+"-doNotShowAgain",_.toString(this.doNotShowAgain))},e}();t.ShoutOutModalController=r},function(e,t){"use strict";function i(e){return{restrict:"A",scope:!1,link:function(t,i){function r(){if(l.length>=1){var t=l.offset().top,r=e.scrollY+(e.outerHeight-(i.height()+a)),u=t-i.height()+l.height();(t>r||r>u)&&i.addClass(o),r>t&&u>r&&i.removeClass(o),r>u?i.removeClass(s).addClass(n):i.removeClass(n).addClass(s)}}var o="open",n="to-top",s="to-bottom",a=100,u=i.find("> a"),c=u[0],l=angular.element(c.hash);angular.element(e).on("scroll",function(){r()}),r()}}}i.$inject=["$window"],t.stickyResults=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"StateSelectCtrl",bindToController:!0}}t.stateSelect=i;var r=function(){function e(e,t,i){this.$http=e,this._=t,this.$window=i,this.countrySelected=!1,this.stateOptions=[],null!=this.$window.staticCountries&&(this.countryOptions=this.$window.staticCountries,null!=this.$window.selectedCountryIso2&&(this.selectedCountry=t.find(this.countryOptions,["isoCodeA2",this.$window.selectedCountryIso2]),this.selectedCountry&&this.updateStateSelectOptions()))}return e.$inject=["$http","_","$window"],e.prototype.updateStateSelectOptions=function(){var e=this;this.countrySelected=!0,this.selectedCountry&&this.$http.get("/?type=1463577273&tx_nanotec_angular[action]=stateOptions&tx_nanotec_angular[country]="+this.selectedCountry.uid).then(function(t){e.stateOptions=t.data,e.$window.selectedCountryZoneIso.length>0&&e.stateOptions.length>0&&(e.selectedState=_.find(e.stateOptions,["isoCode",e.$window.selectedCountryZoneIso]))})},e}();t.StateSelectController=r},function(e,t){"use strict";function i(e){return{restrict:"A",scope:!1,link:function(t,i){function r(){a=i.height(),s.length&&(u=a+s.height(),c=u-n.height()),i.height(a)}function o(){i.removeAttr("style"),l===!0&&(l=!1),i.removeClass("is-fixed is-open")}var n=i.find("#navigation"),s=angular.element(".tec-conf-bar"),a=i.height(),u=a,c=a-n.height(),l=!1;r(),angular.element(e).bind("scroll",function(){r(),e.scrollY>u&&(i.addClass("is-fixed"),l===!1&&(setTimeout(function(){i.addClass("is-open")},200),l=!0)),e.scrollY<c&&(l===!0&&(l=!1),i.removeClass("is-fixed is-open"))}),angular.element(e).bind("resize",function(){o(),r()})}}}i.$inject=["$window"],t.stickyHeader=i},function(e,t){"use strict";function i(e){return{restrict:"A",scope:!1,link:function(t,i){var r=i.find(".navigation-anchor"),o=$("#header .h-header"),n=r.offset().top,s=r.offset().top-r.height(),a=!1;i.height(r.height()),angular.element(e).bind("scroll",function(){e.scrollY>n&&(r.addClass("is-fixed"),o.addClass("no-shadow"),a===!1&&(setTimeout(function(){r.addClass("is-open")},450),a=!0)),e.scrollY<s&&(a===!0&&(a=!1),r.removeClass("is-fixed is-open"),o.removeClass("no-shadow"))}),r.find('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return angular.element("html, body").animate({scrollTop:e.offset().top-120},1e3),!1}}),angular.element("body").scrollspy({target:"#nav-anchor-wrapper",offset:125})}}}i.$inject=["$window"],t.stickySectionNavigation=i},function(e,t){"use strict";function i(e,t){return{restrict:"A",scope:!1,link:function(i,r){function o(){if(!b){var e=d.hasClass("is-open")?"":" is-inactive";angular.forEach(u.find("th"),function(e){var t=angular.element(e).width();angular.element(e).width(t)}),a=r.clone(),u.prepend(a),h.width(u[0].scrollWidth).prepend(r),f.addClass(e).width(c.width()).prepend(h),c.prepend(f),b=!0}}function n(){b&&(a.remove(),u.prepend(r),f.remove(),r.removeAttr("style"),angular.forEach(u.find("th"),function(e){angular.element(e).removeAttr("style")}),b=!1)}function s(){var e=f.parent(),t=e[0];g.scrollLeft=t.scrollLeft,f.on("scroll",function(){t.scrollLeft=g.scrollLeft}),e.on("scroll",function(){g.scrollLeft=t.scrollLeft})}var a,u=r.parent(),c=u.parent(),l=angular.element(".tec-full-page-layover"),p=50,d=angular.element("#header"),f=angular.element("<div>",{"class":"sticky-table-container"}),h=angular.element("<table>",{"class":"sticky-table-product-finder"}),g=f[0],b=!1;r.closest(l).length?l.on("scroll",function(e){var t=u[0].offsetTop,i=t-f.height()+u.height();e.target.scrollTop>t&&e.target.scrollTop<i&&(o(),s(),f.removeClass("is-inactive"),angular.element(".sticky-table-container").css("top",e.target.scrollTop)),e.target.scrollTop>=i&&f.addClass("is-inactive"),e.target.scrollTop<t&&n()}):angular.element(e).on("scroll",function(){var t=u.offset().top-p,i=t-f.height()+u.height();e.scrollY>t&&e.scrollY<i&&(o(),s(),d.hasClass("is-open")&&f.removeClass("is-inactive")),e.scrollY>=i&&f.addClass("is-inactive"),e.scrollY<t&&n()}),i.$on("Productfinder:Sort",function(){i.$on("ResultService:ResultsChanged",function(){t(function(){b&&(n(),o(),s())},0,!1)})})}}}i.$inject=["$window","$timeout"],t.stickyTable=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!1,link:function(e,t){t.tooltip()}}}t.tooltip=i},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"unitSelector",bindToController:!0}}t.unitSelector=i;var r=function(){function e(e){this.UnitGroupsService=e,this.presets=["metric","imperial","individual"],this.unitGroups=e.loadUnitGroups(),this.loadPreset()}return e.$inject=["UnitGroupsService"],e.prototype.persistUnitGroups=function(){this.UnitGroupsService.persistUnitGroups(this.unitGroups)},e.prototype.loadPreset=function(){this.selectedPreset=localStorage.getItem("nanotecUnitGroupPreset"),this.selectedPreset||this.setPreset("metric")},e.prototype.setPreset=function(e){if(-1!==this.presets.indexOf(e)){if(this.selectedPreset=e,"metric"===this.selectedPreset)for(var t=0,i=this.unitGroups;t<i.length;t++){var r=i[t];r.selectedUnit=r.units[0]}if("imperial"===this.selectedPreset)for(var o=0,n=this.unitGroups;o<n.length;o++){var r=n[o];r.selectedUnit=r.units[1]}try{localStorage.setItem("nanotecUnitGroupPreset",this.selectedPreset)}catch(s){return null}this.UnitGroupsService.persistUnitGroups(this.unitGroups)}},e}();t.UnitSelectorController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"user",bindToController:!0}}t.user=i;var r=function(){function e(e){this.UserService=e}return e.$inject=["UserService"],e.prototype.user=function(){return this.UserService.userLoaded?this.UserService.user:null},e.prototype.userExists=function(){return this.UserService.userExists()},e}();t.UserController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"userProfileCtrl",bindToController:!0}}t.userProfile=i;var r=function(){function e(){this.showEditForm=!1}return e.prototype.toggleEditForm=function(){this.showEditForm=!this.showEditForm},e}();t.UserProfileController=r},function(e,t){"use strict";function i(){return{restrict:"A",scope:!0,controller:r,controllerAs:"utilNav",bindToController:!0}}t.utilitiesNavbar=i;var r=function(){function e(e,t,i,r){this.BasketService=e,this.LanguageMenuService=t,this.LoginMenuService=i,this.UnitSelectorMenuService=r}return e.$inject=["BasketService","LanguageMenuService","LoginMenuService","UnitSelectorMenuService"],e.prototype.toggleASideBasket=function(){this.BasketService.toggleBasket()},e.prototype.basketCount=function(){return this.BasketService.lineItemCount()},e.prototype.toggleLangDropdown=function(){this.LanguageMenuService.toggle()},e.prototype.closeLangDropdown=function(){this.LanguageMenuService.isOpen()&&this.LanguageMenuService.toggle()},e.prototype.isLangDropdownOpen=function(){return this.LanguageMenuService.isOpen()},e.prototype.toggleLoginDropdown=function(){this.LoginMenuService.toggle()},e.prototype.closeLoginDropdown=function(){this.LoginMenuService.isOpen()&&this.LoginMenuService.toggle()},e.prototype.isLoginDropdownOpen=function(){return this.LoginMenuService.isOpen()},e.prototype.toggleUnitSelectorDropdown=function(){this.UnitSelectorMenuService.toggle()},e.prototype.closeUnitSelector=function(){this.UnitSelectorMenuService.isOpen()&&this.UnitSelectorMenuService.toggle()},e.prototype.isUnitSelectorOpen=function(){return this.UnitSelectorMenuService.isOpen()},e}();t.UtilitiesNavbarController=r},function(e,t,i){"use strict";var r=i(61),o=i(62),n=i(65),s=i(66),a=i(67),u=i(68),c=i(69),l=function(){function e(e,t,i,r){var o=this;this.$rootScope=e,this.SearchService=t,this.AttributeService=i,this.$log=r,this._filterAttributes={},this._attributeIdsByUsage=[];var n=function(e,t){_.map(t,function(e){_.map(e.search_attributes,function(t){r.debug("Adding attributes",e.search_attributes," because of filtered category",e);var n=_.find(i.attributes,{uid:t});n&&o.addFilterAttribute(n)})}),o.refreshAllFilterAttributes()},s=function(e,t){_.map(t,function(e){_.map(e.search_attributes,function(t){r.debug("Removing attributes",e.search_attributes," because of category unfiltered",e);var n=_.find(i.attributes,{uid:t});n&&o.removeFilterAttribute(n)})})},a=function(){_.map(o._filterAttributes,function(e){o.removeFilterAttribute(e.attribute)})};e.$on("CategoriesService:remove",s),e.$on("CategoriesService:reset",a),e.$on("CategoriesService:updated",n),e.$on("GroupsService:updated",n),e.$on("TorqueSpeedService:update",function(){o.refreshAllFilterAttributes()}),e.$on("TorqueSpeedService:reset",function(){o.refreshAllFilterAttributes()})}return e.$inject=["$rootScope","SearchService","AttributeService","$log"],Object.defineProperty(e.prototype,"filterAttributes",{get:function(){return this._filterAttributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeFilterAttributes",{get:function(){return _.filter(this._filterAttributes,function(e){return e.filtered})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeIdsByUsage",{get:function(){return this._attributeIdsByUsage},enumerable:!0,configurable:!0}),e.prototype.getFilterText=function(e){return this._filterAttributes[e.uid].printableValue},e.prototype.isFiltered=function(e){return this._filterAttributes[e.uid].filtered},e.prototype.toggle=function(e,t,i){e.setValueSelected(t,i),i?this.SearchService.setQueryPart("attribute-"+e.attribute.uid,e.query):this.SearchService.removeQueryPart("attribute-"+e.attribute.uid),
this.$rootScope.$broadcast("AttributeFilter:valueUpdate",e.attribute.uid),this.refreshAllFilterAttributes()},e.prototype.range=function(e,t,i){i>t&&(e.value=[t,i],e.filtered?this.SearchService.setQueryPart("attribute-"+e.attribute.uid,e.query):this.SearchService.removeQueryPart("attribute-"+e.attribute.uid),this.$rootScope.$broadcast("AttributeFilter:valueUpdate",e.attribute.uid),this.refreshAllFilterAttributes())},e.prototype.addFilterAttribute=function(e){var t=this;if(!this._filterAttributes[e.uid]){var i;switch(e.valueFormat){case r.AttributeValueFormat.Special:switch(e.specialType){case r.SpecialAttributes.TorqueAtSpeed:i=new s.TorqueAtSpeedFilter(e);break;case r.SpecialAttributes.Price:i=new a.PriceFilter(e);break;case r.SpecialAttributes.Configuration:i=new u.ConfigurationFilter(e);break;case r.SpecialAttributes.Software:i=new n.AttributeCheckboxFilter(e)}break;case r.AttributeValueFormat.NumericRange:i=new o.AttributeRangeFilter(e);break;case r.AttributeValueFormat.Range:i=new c.AttributeRangeValueFilter(e);break;default:i=new n.AttributeCheckboxFilter(e)}e.valueFormat!==r.AttributeValueFormat.Special||e.specialType===r.SpecialAttributes.Software?this.SearchService.aggregationsOnlyRequest(this.buildAggregation(e)).then(function(r){r.aggregations.allAttributes&&r.aggregations.allAttributes[e.uid]?r.aggregations.allAttributes[e.uid].filtered?i.aggregation=r.aggregations.allAttributes[e.uid].filtered:i.aggregation=r.aggregations.allAttributes[e.uid]:r.aggregations[e.uid]&&(i.aggregation=r.aggregations[e.uid]),t._filterAttributes[e.uid]=i}):this._filterAttributes[e.uid]=i,this.$rootScope.$broadcast("AttributeFilter:added",e),this.$rootScope.$broadcast("AttributeFilter:updated",i.attribute.uid)}},e.prototype.removeFilterAttribute=function(e){delete this._filterAttributes[e.uid],this.SearchService.removeQueryPart("attribute-"+e.uid),this.$rootScope.$broadcast("AttributeFilter:updated",e.uid),this.$rootScope.$broadcast("AttributeFilter:remove",e)},e.prototype.resetFilterAttribute=function(e){this._filterAttributes[e.uid].reset(),this.SearchService.removeQueryPart("attribute-"+e.uid),this.$rootScope.$broadcast("AttributeFilter:valueUpdate",e.uid),this.refreshAllFilterAttributes()},e.prototype.buildAggregation=function(e){var t={allAttributes:{global:{},aggs:{}},attributesInUse:{terms:{field:"attributesInUse",size:500}}};switch(e.valueFormat){case r.AttributeValueFormat.Special:switch(e.specialType){case r.SpecialAttributes.Software:t.allAttributes.aggs[e.uid]={filter:this.SearchService.buildQuery(["attribute-"+e.uid]),aggs:{filtered:{terms:{size:1e3,min_doc_count:0,field:"attributes."+e.uid,order:{_term:"asc"}}}}}}break;case r.AttributeValueFormat.NumericRange:t.allAttributes.aggs[e.uid]={filter:this.SearchService.buildQuery(["attribute-"+e.uid]),aggs:{filtered:{stats:{field:"attributes."+e.uid}}}};break;case r.AttributeValueFormat.Range:t.allAttributes.aggs[e.uid]={filter:this.SearchService.buildQuery(["attribute-"+e.uid]),aggs:{from:{stats:{field:"attributes."+e.uid+".from"}},to:{stats:{field:"attributes."+e.uid+".to"}}}};break;default:t.allAttributes.aggs[e.uid]={filter:this.SearchService.buildQuery(["attribute-"+e.uid]),aggs:{filtered:{terms:{size:1e3,min_doc_count:0,field:"attributes."+e.uid,order:{_term:"asc"}}}}}}return t},e.prototype.refreshAllFilterAttributes=function(){var e=this,t={};_.map(this._filterAttributes,function(i){angular.merge(t,e.buildAggregation(i.attribute))}),this.SearchService.aggregationsOnlyRequest(t).then(function(t){_.map(t.aggregations,function(t,i){e._filterAttributes[i]?e._filterAttributes[i].aggregation=t:"allAttributes"===i?_.map(t,function(t,i){e._filterAttributes[i]&&(t.filtered?e._filterAttributes[i].aggregation=t.filtered:e._filterAttributes[i].aggregation=t)}):"attributesInUse"===i&&(e._attributeIdsByUsage=_.map(t.buckets,"key"),e.$log.debug("_attributeIdsByUsage",e._attributeIdsByUsage))})})},e}();t.AttributeFilterService=l},function(e,t,i){"use strict";var r,o=i(15);!function(e){e[e.FreeText=0]="FreeText",e[e.Boolean=1]="Boolean",e[e.OptionList=2]="OptionList",e[e.Static=3]="Static",e[e.Calculated=4]="Calculated",e[e.NumericRange=5]="NumericRange",e[e.MultiValue=6]="MultiValue",e[e.Range=7]="Range",e[e.Special=8]="Special"}(r=t.AttributeValueFormat||(t.AttributeValueFormat={})),t.SpecialAttributes={TorqueAtSpeed:0,0:{fieldName:"torque_at_speed",transformation:function(e){return _.map(_.pickBy(e[0],function(e,t){return e>0}),function(e,t){return o.CurveController.round(e)+" Ncm at "+t}).join("<br>")}},Price:1,1:{fieldName:"price",transformation:function(e){return e}},Configuration:2,2:{fieldName:"",transformation:function(e){return null}},Software:3,3:{fieldName:"",transformation:function(e){return null}}}},function(e,t,i){"use strict";var r=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i(63),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"aggregation",{set:function(e){null!==e.min&&null!==e.max?(this._canHaveResults=!0,this._value||(this._min=e.min,this._max=e.max,this._value=[this._min,this._max],this._aggregation=e,this._filtered=[!1,!1]),(this._value[0]<e.min||this._value[0]>e.max)&&(this._value[0]=e.min,this._filtered[0]=!1),this._min=e.min,(this._value[1]>e.max||this._value[1]<e.min)&&(this._value[1]=e.max,this._filtered[1]=!1),this._max=e.max,this._filtered[0]===!1&&(this._value=[this._min,this._value[1]]),this._filtered[1]===!1&&(this._value=[this._value[0],this._max])):this._canHaveResults=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){var e={range:{}};return e.range["attributes."+this.attribute.uid]={},this._filtered[0]===!0&&(e.range["attributes."+this.attribute.uid].gte=this._value[0]),this._filtered[1]===!0&&(e.range["attributes."+this.attribute.uid].lte=this._value[1]),e},enumerable:!0,configurable:!0}),t}(o.AbstractRangeFilter);t.AttributeRangeFilter=n},function(e,t,i){"use strict";var r=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i(64),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderType="range",t._filtered=[!1,!1],t._min=0,t._max=0,t._value=[0,0],t._canHaveResults=!0,t}return r(t,e),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtered",{get:function(){return this._filtered[0]||this._filtered[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){_.isArray(e)&&_.isFinite(e[0])&&_.isFinite(e[1])&&(e[0]!==this._value[0]&&e[0]!==this._min?this._filtered[0]=!0:e[0]===this._min&&(this._filtered[0]=!1),e[1]!==this._value[1]?this._filtered[1]=!0:e[1]===this._max&&(this._filtered[1]=!1),this._value=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"printableValue",{get:function(){return this._value[0]+" - "+this._value[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"from",{get:function(){return this._value[0]},set:function(e){e<this._value[1]&&(this.value=[e,this._value[1]])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this._value[1]},set:function(e){e>this._value[0]&&(this.value=[this._value[0],e])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canHaveResults",{get:function(){return this._canHaveResults},enumerable:!0,configurable:!0}),t.prototype.reset=function(){_.isFinite(this._min)&&_.isFinite(this._max)&&(this._value=[this._min,this._max],this._filtered=[!1,!1])},t}(o.AbstractAttributeFilter);t.AbstractRangeFilter=n},function(e,t){"use strict";var i=function(){function e(e){this._attribute=e,this._expanded=!1}return Object.defineProperty(e.prototype,"aggregation",{get:function(){return this._aggregation},set:function(e){this._aggregation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribute",{get:function(){return this._attribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderType",{get:function(){return this._renderType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(e){this._expanded=e},enumerable:!0,configurable:!0}),e}();t.AbstractAttributeFilter=i},function(e,t,i){"use strict";var r=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i(64),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderType="checkbox",t}return r(t,e),Object.defineProperty(t.prototype,"aggregation",{get:function(){return this._aggregation},set:function(e){this._aggregation?angular.merge(this._aggregation,this._aggregation,e):(this._aggregation=e,this._aggregation.buckets=_.map(e.buckets,function(e){return e.selected=!1,e}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"printableValue",{get:function(){return this.getSelectedKeys().join("; ")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){var e={terms:{}};return e.terms["attributes."+this.attribute.uid]=this.getSelectedKeys(),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtered",{get:function(){return this.getSelectedKeys().length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canHaveResults",{get:function(){return _.some(this._aggregation.buckets,function(e){return e.doc_count>0})},enumerable:!0,configurable:!0}),t.prototype.setValueSelected=function(e,t){var i=_.find(this._aggregation.buckets,{key:e});i&&(i.selected=t)},t.prototype.reset=function(){_.map(this._aggregation.buckets,function(e){e.selected=!1})},t.prototype.getSelectedKeys=function(){return _.map(_.filter(this._aggregation.buckets,{selected:!0}),"key")},t}(o.AbstractAttributeFilter);t.AttributeCheckboxFilter=n},function(e,t,i){"use strict";var r=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i(64),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderType="torqueAtSpeed",t}return r(t,e),Object.defineProperty(t.prototype,"printableValue",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtered",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(){},t}(o.AbstractAttributeFilter);t.TorqueAtSpeedFilter=n},function(e,t,i){"use strict";var r=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i(64),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderType="price",t}return r(t,e),Object.defineProperty(t.prototype,"printableValue",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtered",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(){},t}(o.AbstractAttributeFilter);t.PriceFilter=n},function(e,t,i){"use strict";var r=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i(64),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderType="configuration",t}return r(t,e),Object.defineProperty(t.prototype,"printableValue",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtered",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(){},t}(o.AbstractAttributeFilter);t.ConfigurationFilter=n},function(e,t,i){"use strict";var r=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},o=i(63),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"aggregation",{set:function(e){null!==e.from&&null!==e.to&&null!==e.from.min&&null!==e.from.max&&(this._value||(this._min=e.from.min,this._max=e.to.max,this._value=[this._min,this._max],this._aggregation=e,this._filtered=[!1,!1]),(this._value[0]<e.from.min||this._value[0]>e.to.max)&&(this._value[0]=e.from.min,this._filtered[0]=!1),this._min=e.from.min,(this._value[1]>e.to.max||this._value[1]<e.from.min)&&(this._value[1]=e.to.max,this._filtered[1]=!1),this._max=e.to.max,this._filtered[0]===!1&&(this._value=[this._min,this._value[1]]),this._filtered[1]===!1&&(this._value=[this._value[0],this._max]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){var e="attributes."+this.attribute.uid+".from",t="attributes."+this.attribute.uid+".to",i={bool:{should:[]}},r={range:{}};r.range[e]={lte:this._value[1],gte:this._value[0]},i.bool.should.push(r);var o={range:{}};o.range[t]={lte:this._value[1],gte:this._value[0]},i.bool.should.push(o);var n={bool:{must:[]}},s={range:{}},a={range:{}};return s.range[e]={lte:this._value[0]},a.range[t]={gte:this._value[1]},n.bool.must.push(s),n.bool.must.push(a),i.bool.should.push(n),i},enumerable:!0,configurable:!0}),t}(o.AbstractRangeFilter);t.AttributeRangeValueFilter=n},function(e,t){"use strict";var i=function(){function e(){this._attributes=[]}return Object.defineProperty(e.prototype,"attributes",{get:function(){return this._attributes},set:function(e){0===this._attributes.length&&(this._attributes=e)},enumerable:!0,configurable:!0}),e}();t.AttributeService=i},function(e,t){"use strict";var i=function(){function e(e){var t=this;this.$http=e,this.ready=!1,this.basketLoaded=!1,this.basketIsOpen=!1,this.basket={lineItems:[],amount:0,amountOfIndividualItems:0,netTotal:0},this.$http.get("/basket/").then(function(e){t.basket=e.data,t.basketLoaded=!0,t.ready=!0})}return e.$inject=["$http"],e.bindEscToCloseBasket=function(){$(document).keyup(function(e){27===e.which&&this.basketIsOpen&&(this.basketIsOpen=!1)})},e.prototype.toggleBasket=function(){this.basketIsOpen=!this.basketIsOpen,this.basketIsOpen&&e.bindEscToCloseBasket()},e.prototype.isCartOpen=function(){return this.basketIsOpen},e.prototype.lineItemCount=function(){return this.basket.amountOfIndividualItems},e.prototype.getLineItems=function(){return this.basket.lineItems},e.prototype.addLineItem=function(t,i,r){var o=this;void 0===r&&(r=!0);var n=$.param({tx_nanotec_basketapi:{lineItem:t}});this.basketLoaded=!1,this.$http.get("/basket?tx_nanotec_basketapi[action]=add&"+n).then(function(t){o.basket=t.data,o.basketLoaded=!0,i.length>0?angular.element("#"+i).modal():r&&(o.basketIsOpen=!0,e.bindEscToCloseBasket())})},e.prototype.setLineItemAmount=function(e,t){var i=this,r=$.param({tx_nanotec_basketapi:{lineItemIdentifier:e.identifier,amount:t}});this.basketLoaded=!1,this.$http.get("/basket?tx_nanotec_basketapi[action]=setAmount&"+r).then(function(e){i.basket=e.data,i.basketLoaded=!0})},e.prototype.clear=function(){var e=this;this.basketLoaded=!1,this.$http.get("/basket?tx_nanotec_basketapi[action]=clear").then(function(t){e.basket=t.data,e.basketLoaded=!0})},e}();t.BasketService=i},function(e,t){"use strict";function i(){return function(e,t){return void 0===t&&(t=""),t&&t.length>0&&(e=t),"TRUE"===_.upperCase(e)?'<i class="icon-check-circle"></i>':"FALSE"===_.upperCase(e)?'<i class="icon-close-circle"></i>':e}}t.BooleanValueFilter=i},function(e,t){"use strict";var i=function(){function e(e,t,i,r,o){this.$rootScope=e,this.$log=t,this.SearchService=i,this.ElasticConnectionService=r,this.$injector=o,this._categories=[],this._categoryTree=[],this._filteredUids=[],this._locked=!1}return e.$inject=["$rootScope","$log","SearchService","ElasticConnectionService","$injector"],Object.defineProperty(e.prototype,"categories",{get:function(){return this._categories},set:function(e){0===this._categories.length&&(this._categories=e,this.$log.debug("Categories assigned"),this.buildCategoryTree(),this.updateAggregationCount())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locked",{get:function(){return this._locked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryTree",{get:function(){return this._categoryTree},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredCategoryUids",{get:function(){return this._filteredUids},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredCategories",{get:function(){var e=this;return _.filter(this._categories,function(t){return e._filteredUids.indexOf(t.uid)>-1})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredCategoryTitles",{get:function(){var e=_.map(this.filteredCategories,"title");return e.join(", ")},enumerable:!0,configurable:!0}),e.prototype.addCategoryFilter=function(e){this._filteredUids=_.union(this._filteredUids,e),this.$injector.get("SearchService").setQueryPart("category",this.buildQueryPart()),this.$rootScope.$broadcast("CategoriesService:updated",this.filteredCategories)},e.prototype.lock=function(){this._locked=!0},e.prototype.modifyTreeFilterState=function(e,t){var i=this;_.map(e,function(e){i.setCategoryNodeFilteredById(e,t,i.categoryTree)})},e.prototype.removeCategoryFilter=function(e){var t=_.filter(this._categories,function(t){return e.indexOf(t.uid)>-1});this._filteredUids=_.difference(this._filteredUids,e),this._filteredUids.length>0?this.$injector.get("SearchService").setQueryPart("category",this.buildQueryPart()):this.$injector.get("SearchService").removeQueryPart("category"),this.$rootScope.$broadcast("CategoriesService:remove",t),this.$rootScope.$broadcast("CategoriesService:updated",this.filteredCategories)},e.prototype.reset=function(){this._filteredUids=[],this.buildCategoryTree(),this.$injector.get("SearchService").removeQueryPart("category"),this.$rootScope.$broadcast("CategoriesService:reset")},e.prototype.highestCategory=function(e){var t,i=e.category.split("/");for(i.shift();!t&&i.length>0||162===t.uid&&i.length>0;)t=_.find(this.categories,{uid:parseInt(i.shift(),10)});return t},e.prototype.deepestCategory=function(e){var t,i=e.category.split("/");for(i.shift();!t&&i.length>0;)t=_.find(this.categories,{uid:parseInt(i.pop(),10)});return t},e.prototype.setCategoryNodeFilteredById=function(e,t,i){var r=this;_.map(i,function(i){return i.uid===e?i.filtered=t:i.children&&i.children.length>0&&r.setCategoryNodeFilteredById(e,t,i.children),i})},e.prototype.buildQueryPart=function(){var e=this,t=[];return _.map(this._filteredUids,function(i){var r=_.find(e._categories,{uid:i});r&&(t=_.union(t,r.orderable_articles))}),{bool:{should:[{ids:{values:t}},{nested:{path:"rootNode",query:{terms:{"rootNode.uid":t}}}}]}}},e.prototype.buildAggregationQuery=function(){var e=this.SearchService.buildQuery([],!0);return e.bool.must.push({type:{value:"simple"}}),e},e.prototype.updateAggregationCount=function(){var e=this;this.ElasticConnectionService.client.search({index:this.ElasticConnectionService.languageIndex,body:{query:this.buildAggregationQuery(),size:0,aggs:{category:{terms:{size:1e3,field:"category",min_doc_count:0,order:{_term:"asc"}}}}},filter_path:"aggregations"}).then(function(t){e.$log.debug("Category aggregations loaded"),_.map(t.aggregations.category.buckets,function(t){for(var i=_.map(_.filter(t.key.split("/")),Number),r=0,o={children:e._categoryTree};r<i.length&&o;)o=_.find(o.children,{uid:i[r]}),r++;o&&(o.doc_count=t.doc_count)}),e.$rootScope.$broadcast("CategoriesService:updated"),e.$log.debug("Category aggregations updated")})},e.prototype.buildCategoryTree=function(){var e=this,t=_.chain(this._categories).map(function(t){var i=_.map(_.filter(t.category_path.split("/")),Number);return t.category_path_array=i,i.length>1&&(t.parentCategoryUid=i[i.length-2]),t.children=[],t.filtered=e._filteredUids.indexOf(t.uid)>=0,t}).sortBy(function(e){return e.sorting?e.sorting:Number.MAX_VALUE}).groupBy(function(e){return e.category_path.split("/").length-2}).toArray().reverse().value();angular.forEach(t,function(e,i){i<t.length-1&&angular.forEach(e,function(e){_.find(t[i+1],{uid:e.parentCategoryUid}).children.push(e)})}),this._categoryTree=t.pop(),this.$log.debug("Category tree built")},e}();t.CategoriesService=i},function(e,t){"use strict";var i;!function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.Only=2]="Only"}(i=t.ShowConfigurations||(t.ShowConfigurations={}));var r=function(){function e(e,t){this.$rootScope=e,this.SearchService=t,this._showConfigurations=i.No,this.checkSetQueryPart()}return e.$inject=["$rootScope","SearchService"],Object.defineProperty(e.prototype,"showConfigurations",{get:function(){return this._showConfigurations},set:function(e){this._showConfigurations=e,this.checkSetQueryPart()},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._showConfigurations=i.No,this.checkSetQueryPart()},e.prototype.checkSetQueryPart=function(){var e={bool:{should:[]}};this._showConfigurations===i.No&&e.bool.should.push({type:{value:"simple"}}),this._showConfigurations===i.Yes&&(e.bool.should.push({type:{value:"simple"}}),e.bool.should.push({type:{value:"combined"}})),this._showConfigurations===i.Only&&e.bool.should.push({type:{value:"combined"}}),this.SearchService.setQueryPart("configurations",e),this.$rootScope.$broadcast("ConfigurationFilterService:updated")},e}();t.ConfigurationFilterService=r},function(e,t,i){"use strict";var r=i(11),o=function(){function e(e){e.get("currentConfigurationCache")||(this._cache=e.createCache("currentConfigurationCache",{deleteOnExpire:"passive",storageMode:"localStorage"}))}return e.$inject=["CacheFactory"],Object.defineProperty(e.prototype,"currentConfiguration",{get:function(){return this._currentConfiguration},set:function(e){this.dirty=!0,this._currentConfiguration=e,e instanceof r.Configuration?(this._currentConfigurationIdentifier=e.identifier,this._cache.put("currentConfiguration",e.identifier)):(this._currentConfigurationIdentifier="",this._cache.remove("currentConfiguration"),this._cache.remove("currentConfigurationDirty"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newConfiguration",{set:function(e){this.dirty=!1,this._currentConfiguration=e,e instanceof r.Configuration?(this._currentConfigurationIdentifier=e.identifier,this._cache.put("currentConfiguration",e.identifier)):(this._currentConfigurationIdentifier="",this._cache.remove("currentConfiguration"),this._cache.remove("currentConfigurationDirty"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentConfigurationIdentifier",{get:function(){return this._currentConfigurationIdentifier||(this._currentConfigurationIdentifier=this._cache.get("currentConfiguration")),this._currentConfigurationIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty=this._cache.get("currentConfigurationDirty"),this._dirty},set:function(e){this._dirty=e,this._cache.put("currentConfigurationDirty",this._dirty)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.currentConfiguration=null},e}();t.CurrentConfigurationService=o},function(e,t){"use strict";var i=function(){function e(){this.storage={}}return e.prototype.get=function(e){return this.storage[e]},e.prototype.set=function(e,t){this.storage[e]=t},e}();t.DsbStorage=i},function(e,t){"use strict";var i=function(){function e(e,t){this.esFactory=e,this.$rootScope=t,this._client=e({host:{path:"/pfinder-api",host:"",port:80,protocol:"http"}})}return e.$inject=["esFactory","$rootScope"],Object.defineProperty(e.prototype,"languageIndex",{get:function(){return this._languageIndex},set:function(e){this._languageIndex=e,this.$rootScope.$broadcast("ElasticConnection:LanguageChanged")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"client",{get:function(){return this._client},enumerable:!0,configurable:!0}),e}();t.ElasticConnectionService=i},function(e,t,i){"use strict";var r=i(74),o=function(){function e(e,t,i,r,o,n,s){var a=this;this.CategoriesService=t,this.GroupsService=i,this.PriceService=r,this.AttributeFilterService=o,this.TorqueSpeedService=n,this.ConfigurationFilterService=s,this.isCategoryFiltered=!1,this.isGroupFiltered=!1,this.categoryFilter="",this.groupFilter="",this.isPriceFiltered=!1,this.priceFilter="",this.activeFilterAttributes=[],e.$on("CategoriesService:updated",function(){t.filteredCategoryUids.length>0?(a.isCategoryFiltered=!0,a.categoryFilter=t.filteredCategoryTitles):a.isCategoryFiltered=!1}),e.$on("CategoriesService:reset",function(){a.isCategoryFiltered=!1,a.categoryFilter=""}),e.$on("GroupsService:updated",function(){i.filteredGroupUids.length>0?(a.isGroupFiltered=!0,a.groupFilter=i.filteredGroupTitles):a.isGroupFiltered=!1}),e.$on("GroupsService:reset",function(){a.isGroupFiltered=!1}),e.$on("PriceService:updated",function(){a.priceFilter=r.from/100+" - "+r.to/100,a.isPriceFiltered=!0}),e.$on("PriceService:reset",function(){a.isPriceFiltered=!1}),this.activeFilterAttributes=o.activeFilterAttributes,e.$on("AttributeFilter:valueUpdate",function(){a.activeFilterAttributes=o.activeFilterAttributes}),e.$on("AttributeFilter:remove",function(){a.activeFilterAttributes=o.activeFilterAttributes})}return e.$inject=["$rootScope","CategoriesService","GroupsService","PriceService","AttributeFilterService","TorqueSpeedService","ConfigurationFilterService"],Object.defineProperty(e.prototype,"filterListActive",{get:function(){return this.isShowConfigurationsSet||this.isPriceFiltered||this.isGroupFiltered||this.activeFilterAttributes.length>0||this.TorqueSpeedService.isFiltered||this.isCategoryFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowConfigurationsSet",{get:function(){return this.ConfigurationFilterService.showConfigurations!==r.ShowConfigurations.No},enumerable:!0,configurable:!0}),e}();t.FilterListService=o},function(e,t){"use strict";var i=function(){function e(e,t){this.$rootScope=e,this.$injector=t,this._groups=[]}return e.$inject=["$rootScope","$injector"],Object.defineProperty(e.prototype,"groups",{get:function(){return this._groups},set:function(e){0===this._groups.length&&(this._groups=e,this.$injector.get("SearchService").setQueryPart("group",this.buildQueryPart()),this.$rootScope.$broadcast("GroupsService:updated",this.filteredGroups))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredGroupUids",{get:function(){return _.map(this._groups,"uid")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredGroups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredGroupTitles",{get:function(){var e=_.map(this.filteredGroups,"title");return e.join(", ")},enumerable:!0,configurable:!0}),e.prototype.buildQueryPart=function(){var e={ids:{values:[]}};return _.map(this._groups,function(t){e.ids.values=_.union(e.ids.values,t.orderable_articles)}),e},e}();t.GroupsService=i},function(e,t){"use strict";function i(){return function(e){return angular.isArray(e)}}t.IsArrayFilter=i},function(e,t){"use strict";var i=function(){function e(){this.open=!1}return e.prototype.isOpen=function(){return this.open},e.prototype.toggle=function(){this.open=!this.open},e}();t.LanguageMenuService=i},function(e,t){"use strict";var i=function(){function e(){this.open=!1}return e.prototype.isOpen=function(){return this.open},e.prototype.toggle=function(){this.open=!this.open},e}();t.LoginMenuService=i},function(e,t){"use strict";var i=function(){function e(e){this.LanguageMenuService=e,this.open=!1}return e.$inject=["LanguageMenuService"],e.prototype.toggle=function(){open&&this.LanguageMenuService.isOpen()&&this.LanguageMenuService.toggle(),this.open=!this.open},e.prototype.isOpen=function(){return this.open},e}();t.MobileNavService=i},function(e,t,i){"use strict";function r(){return function(e){return Number(e)?o.CurveController.round(Number(e)).toString():e?e:""}}var o=i(15);t.NumberPrecision=r},function(e,t){"use strict";function i(e){return function(t){var i=1,r="€",o=2,n=100,s=window.nanotecCurrency;return s&&(i=+s.tx_tvtables_euro_conversion_rate,r=s.cu_symbol_left,o=+s.cu_decimal_digits,n=+s.cu_sub_divisor),e("currency")(t/n*i,r,o)}}i.$inject=["$filter"],t.PriceAndCurrencyFilter=i},function(e,t,i){"use strict";var r=i(61),o=function(){function e(e,t,i,o){var n=this;this.$rootScope=e,this.ElasticConnectionService=t,this.SearchService=i,this._min=0,this._max=0,this._from=0,this._to=0,this._isReadyDefer=o.defer(),e.$on("AttributeFilter:added",function(e,t){t.valueFormat===r.AttributeValueFormat.Special&&t.specialType===r.SpecialAttributes.Price&&n.initializeRange()}),e.$on("AttributeFilter:remove",function(e,t){t.valueFormat===r.AttributeValueFormat.Special&&t.specialType===r.SpecialAttributes.Price&&n.reset()})}return e.$inject=["$rootScope","ElasticConnectionService","SearchService","$q"],Object.defineProperty(e.prototype,"ready",{get:function(){return this._isReadyDefer.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},set:function(e){this._from=e,this.checkSetQueryPart()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},set:function(e){this._to=e,this.checkSetQueryPart()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{set:function(e){this._from=e[0],this._to=e[1],this.checkSetQueryPart()},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._from=this._min,this._to=this._max,this.checkSetQueryPart()},e.prototype.initializeRange=function(){var e=this;this.ElasticConnectionService.client.search({index:this.ElasticConnectionService.languageIndex,body:{query:this.SearchService.buildQuery(),size:0,aggs:{all:{global:{},aggs:{price:{stats:{field:"price"}}}}}},filter_path:"aggregations"}).then(function(t){e._min=Number(t.aggregations.all.price.min),e._max=Number(t.aggregations.all.price.max),e._from=angular.copy(e._min),e._to=angular.copy(e._max),e._isReadyDefer.resolve(!0)})},e.prototype.checkSetQueryPart=function(){this._from===this._min&&this._to===this._max?(this.SearchService.removeQueryPart("price"),this.$rootScope.$broadcast("PriceService:reset")):(this.SearchService.setQueryPart("price",this.buildQueryPart()),this.$rootScope.$broadcast("PriceService:updated"))},e.prototype.buildQueryPart=function(){return{range:{price:{gte:this._from,lte:this._to}}}},e}();t.PriceService=o},function(e,t,i){"use strict";var r=i(61),o=i(13),n=function(){function e(e,t,i){this.AttributeService=e,this.$log=t,this.$rootScope=i,this._elasticResults=[],this._displayedResults=[],this._totalHits=0,this._windowSize=10,this._nextWindowSize=10,this._mediaListAttributeLimit=o.MEDIA_ROW_ATTRIBUTE_LIMIT;
}return e.$inject=["AttributeService","$log","$rootScope"],Object.defineProperty(e.prototype,"windowSize",{get:function(){return this._windowSize},set:function(e){this._windowSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextWindowSize",{get:function(){return this._nextWindowSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalHits",{get:function(){return this._totalHits},set:function(e){this._totalHits=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaListAttributeLimit",{get:function(){return this._mediaListAttributeLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedResults",{get:function(){return this._displayedResults},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elasticResults",{set:function(e){this._elasticResults=e,this.showMore()},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._displayedResults=[],this._elasticResults=[],this._totalHits=0,this._nextWindowSize=this._windowSize},e.prototype.showMore=function(){var e=this,t=_.map(this._elasticResults,function(t){return t.attributes=_.chain(t.attributes).map(function(i,o){var n=_.clone(_.find(e.AttributeService.attributes,{uid:parseInt(o,10)}));if(!_.isUndefined(n)){if(n.valueFormat===r.AttributeValueFormat.Special&&n.specialType!==r.SpecialAttributes.Software){if(!t.specialFields||!r.SpecialAttributes[n.specialType]||!t.specialFields[r.SpecialAttributes[n.specialType].fieldName])return null;var s=r.SpecialAttributes[n.specialType];n.value=s.transformation(t.specialFields[s.fieldName])}else n.value=i;return n}e.$log.debug("Couldn't find attribute ",o,"used in product",t.uid)}).compact().value(),t.mediaListAttributeLimit=e._mediaListAttributeLimit,t});this._displayedResults=this._displayedResults.concat(t),this._totalHits-this._displayedResults.length>this._windowSize?this._nextWindowSize=this._windowSize:this._nextWindowSize=this._totalHits-this._displayedResults.length,this.$rootScope.$broadcast("ResultService:ResultsChanged")},e.prototype.hasMore=function(){return this._totalHits>this._displayedResults.length},e}();t.ResultsService=n},function(e,t){"use strict";var i=function(){function e(e,t,i,r,o,n){var s=this;this.ElasticConnectionService=t,this.$q=i,this.$timeout=r,this.$log=o,this.ResultsService=n,this._canExecuteRequests=!1,this._queryParts={},this._sortingParts=[],this._scriptFields={},this._client=t.client,this._state=0,e.$on("Productfinder:Ready",function(){s._canExecuteRequests=!0,s.executeRequest()})}return e.$inject=["$rootScope","ElasticConnectionService","$q","$timeout","$log","ResultsService"],Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.aggregationsOnlyRequest=function(e,t){return this._client.search({index:this.ElasticConnectionService.languageIndex,body:{query:t?t:this._query,size:0,aggs:e},filter_path:"aggregations"})},e.prototype.refresh=function(){var e=this;this.$timeout.cancel(this._debounce),this._debounce=this.$timeout(function(){e.ResultsService.reset(),e.executeRequest()},300)},e.prototype.sortByField=function(e,t){if(void 0===t&&(t="asc"),this._sortingParts=[],"none"!==t){var i=_.find(this._sortingParts,function(t){return!!t[e]});i?i[e]=t:(i={},i[e]=t,this._sortingParts.push(i))}else _.remove(this._sortingParts,function(t){return!!t[e]});this.refresh()},e.prototype.setQueryPart=function(e,t){this._queryParts[e]=t,this.refresh()},e.prototype.removeQueryPart=function(e){delete this._queryParts[e],this.refresh()},e.prototype.setScriptField=function(e,t){this._scriptFields[e]=t,this.refresh()},e.prototype.removeScriptField=function(e){delete this._scriptFields[e],this.refresh()},e.prototype.loadMore=function(){var e=this;this.$timeout.cancel(this._debounce),this._debounce=this.$timeout(function(){e.executeRequest()},300)},e.prototype.buildQuery=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=!1);var i=angular.copy(this._queryParts);if(_.unset(i,e),_.isEmpty(i)&&!t)return{match_all:{}};var r={bool:{must:[]}};return _.map(i,function(e){e!==!1&&r.bool.must.push(e)}),r},e.prototype.executeRequest=function(){var e=this;this._canExecuteRequests&&(this._state=1,document.body.style.cursor="wait",this._canceler&&(this._canceler.reject(),this.$log.debug("Search request canceled")),this._canceler=this.$q.defer(),this._canceler.promise.then(function(t){e.ResultsService.totalHits=t.hits.total,e.ResultsService.elasticResults=_.map(t.hits.hits,function(e){return e.fields&&(e._source.specialFields={},_.assign(e._source.specialFields,e.fields)),e._source}),e._state=2,document.body.style.cursor="auto",e._canceler=null}),this._query=this.buildQuery(),this.$log.debug("Search request triggered",this._query),this._client.search({index:this.ElasticConnectionService.languageIndex,body:{query:this._query,size:this.ResultsService.windowSize,from:this.ResultsService.displayedResults.length,sort:this._sortingParts.length>0?this._sortingParts:["deepSorting"],_source:"*",script_fields:this._scriptFields},filter_path:"hits.total,hits.hits._source,hits.hits.fields"}).then(function(t){e._canceler&&(e.$log.debug("Search request resolved"),e._canceler.resolve(t))}))},e}();t.SearchService=i},function(e,t){"use strict";var i=function(){function e(e,t){var i=this;this.AttributeService=e,this._attributes=[],this._colLimit=10,t.$on("CategoriesService:updated",function(t,r){_.map(r,function(t){_.map(t.search_attributes,function(t){var r=_.find(e.attributes,{uid:t});r&&i._attributes.length<i._colLimit&&i.addAttribute(r)})})}),t.$on("AttributeFilter:added",function(e,t){i.addAttribute(t)}),t.$on("AttributeFilter:remove",function(e,t){_.remove(i._attributes,{uid:t.uid})})}return e.$inject=["AttributeService","$rootScope"],Object.defineProperty(e.prototype,"colLimit",{get:function(){return this._colLimit},set:function(e){this._colLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this._attributes},enumerable:!0,configurable:!0}),e.prototype.addAttribute=function(e){-1===this._attributes.indexOf(e)&&this._attributes.push(e)},e.prototype.removeAttribute=function(e){this._attributes.slice(this._attributes.indexOf(e),1)},e}();t.TableColumnsService=i},function(e,t,i){"use strict";var r=i(61),o=i(15),n=function(){function e(e,t,i){var o=this;this.SearchService=e,this.ElasticConnectionService=t,this.$rootScope=i,this._speed=100,this._speedRange=[10,1e4],this._torque=[.001,3],this._torqueRange=[.001,3],this._isFiltered=!1,this._calcValueScript="def speedCurve = curve.curveData.speed.data.speed; if (speedCurve == null) { continue; } def index = 0; def inSpeedRange = true;while (speedCurve[index].x < params.speed && index < speedCurve.size()-1) {   index++; } if (speedCurve[index].x < params.speed) { inSpeedRange = false; }def point1 = speedCurve[index - 1]; def point2 = speedCurve[index]; def cline = (point1.y - point2.y) / (point1.x - point2.x); def offset = point1.y - (cline * point1.x); def calculatedValue = cline * params.speed + offset; ",i.$on("AttributeFilter:added",function(e,t){t.valueFormat===r.AttributeValueFormat.Special&&t.specialType===r.SpecialAttributes.TorqueAtSpeed&&(o._attribute=t,o._attribute.hideInTableHead=!0,o._attributeOriginalTitle||(o._attributeOriginalTitle=t.title),o._attribute.title=o.translateTitle(o._attributeOriginalTitle),o.initializeRange())}),i.$on("AttributeFilter:remove",function(e,t){t.valueFormat===r.AttributeValueFormat.Special&&t.specialType===r.SpecialAttributes.TorqueAtSpeed&&o.reset()}),i.$on("CategoriesService:updated",function(){o.initializeRange()})}return e.$inject=["SearchService","ElasticConnectionService","$rootScope"],Object.defineProperty(e,"FIELDNAME",{get:function(){return"torque_at_speed"},enumerable:!0,configurable:!0}),e.prototype.translateTitle=function(e){var t=e.match(/<(.*),(.*)>/);if(t&&t.length>1){var i=t[1],r=t[2];e=this._isFiltered?e.replace(/<.*>/g,this._speed+" "+r):e.replace(/<.*>/g,i)}return e},e.prototype.reset=function(){this.SearchService.removeScriptField(e.FIELDNAME),this.SearchService.removeQueryPart(e.FIELDNAME),this.initializeRange(),this._isFiltered=!1,this._attribute.hideInTableHead=!0,this._attribute.title=this.translateTitle(this._attributeOriginalTitle),this.$rootScope.$broadcast("TorqueSpeedService:reset")},e.prototype.getScriptField=function(){return{script:{lang:"painless",inline:"def curveTorques = new HashMap(); if (params._source.curves == null) { return curveTorques; }for (curve in params._source.curves) {"+this._calcValueScript+"  def identifier = '' + curve.max_power + 'A ' + curve.voltage + 'V';  curveTorques[identifier] = calculatedValue;} return curveTorques;",params:{speed:this._speed}}}},e.prototype.getQuery=function(){return{bool:{must:[{terms:{curveType:[0,2]}},{exists:{field:"curves.curveData.speed.data.speed"}},{script:{script:{lang:"painless",inline:"def curveTorques = new HashMap(); if (params._source.curves == null) { return false; }for (curve in params._source.curves) {"+this._calcValueScript+"  if (calculatedValue >= params.from_torque && calculatedValue <= params.to_torque && inSpeedRange) {     return true;  } } return false;",params:{speed:this._speed,from_torque:this._torque[0],to_torque:this._torque[1]}}}}]}}},e.prototype.refresh=function(){this.SearchService.setScriptField(e.FIELDNAME,this.getScriptField()),this.SearchService.setQueryPart(e.FIELDNAME,this.getQuery()),this._isFiltered=!0,this.$rootScope.$broadcast("TorqueSpeedService:update")},e.prototype.initializeRange=function(){var e=this,t=this.SearchService.buildQuery();t.bool.must.push({terms:{curveType:[0,2]}}),this.ElasticConnectionService.client.search({index:this.ElasticConnectionService.languageIndex,body:{query:t,size:0,aggs:{speed:{stats:{field:"curves.curveData.speed.data.speed.x"}},torque:{stats:{field:"curves.curveData.speed.data.speed.y"}}}},filter_path:"aggregations"}).then(function(t){e._speedRange=[Number(Number(t.aggregations.speed.min).toFixed(3)),Number(Number(t.aggregations.speed.max).toFixed(3))],e._speed=Math.round((e._speedRange[1]-e._speedRange[0])/2),e._torqueRange=[Number(Number(t.aggregations.torque.min).toFixed(3)),Number(Number(t.aggregations.torque.max).toFixed(3))],e._torque=angular.copy(e._torqueRange),e.$rootScope.$broadcast("TorqueSpeedService:rangeUpdated")})},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e,this._attribute.hideInTableHead=!1,this._attribute.title=this.translateTitle(this._attributeOriginalTitle),this.$rootScope.$broadcast("curveUpdate",{comparePoint:e}),this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedRange",{get:function(){return this._speedRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torqueRange",{get:function(){return this._torqueRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torque",{get:function(){return this._torque},set:function(e){this._torque=e,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFiltered",{get:function(){return this._isFiltered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterText",{get:function(){return o.CurveController.round(this._torque[0])+"-"+o.CurveController.round(this._torque[1])+" Nm"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribute",{get:function(){return this._attribute},enumerable:!0,configurable:!0}),e}();t.TorqueSpeedService=n},function(e,t){"use strict";function i(e){function t(e,t){if(!isNaN(e)){var i=+e*t.selectedUnit.conversionFactor,r=0;return 100>i&&i>0&&(r=Math.ceil(Math.log(Math.ceil(1/i))/Math.log(10))+2),parseFloat(i.toFixed(r))}return e}var i,r=[],o=", ",n=function(n,s,a,u){if(void 0===a&&(a=""),u=u||"valueAndSymbol",r.length=0,i=_.find(e.loadUnitGroups(),{uid:s}),i&&((""+n).indexOf(" - ")>-1&&(o=" - ",r=n.split(" - "),2===r.length&&(r=r.map(function(e){return t(e,i)}))),(""+n).indexOf("; ")>-1&&(o="; ",r=n.split("; "),r=r.map(function(e){return t(e,i)})),isNaN(n)||(r=[t(n,i)]),r.length>0)){if("valueAndSymbol"===u)return r.join(o)+"&nbsp;"+i.selectedUnit.symbol;if("value"===u)return r.join(o);if("symbol"===u)return i.selectedUnit.symbol}return n&&n.length>0&&a.length>0?n+" "+a:n};return n.$stateful=!0,n}i.$inject=["UnitGroupsService"],t.UnitGroupFilter=i},function(e,t){"use strict";var i=function(){function e(e){this.$window=e;var t=this.loadUnitGroups();this.unitGroups=e.nanotecUnitGroups;for(var i=0,r=this.unitGroups;i<r.length;i++){var o=r[i];o.units=_.toArray(o.units);var n=_.find(t,{uid:o.uid});n&&n.selectedUnit&&_.find(o.units,{uid:n.selectedUnit.uid})&&(o.selectedUnit=n.selectedUnit)}this.persistUnitGroups(this.unitGroups)}return e.$inject=["$window"],e.prototype.persistUnitGroups=function(e){try{localStorage.setItem("nanotecUnitGroups",JSON.stringify(e))}catch(t){return null}},e.prototype.loadUnitGroups=function(){var e=localStorage.getItem("nanotecUnitGroups");return e?JSON.parse(e):[]},e.prototype.getUnit=function(e){return _.find(this.unitGroups,{selected:!0})},e}();t.UnitGroupsService=i},function(e,t){"use strict";var i=function(){function e(){this.open=!1}return e.prototype.isOpen=function(){return this.open},e.prototype.setOpen=function(e){this.open=e},e.prototype.toggle=function(){this.open=!this.open},e}();t.UnitSelectorMenuService=i},function(e,t){"use strict";var i=function(){function e(e,t){var i=this;this.userLoaded=!1;var r=t.defer();this._isReady=r.promise,e.get("/user/").then(function(e){e.data?i._user=e.data:i._user=null,i.userLoaded=!0,r.resolve(!0)})}return e.$inject=["$http","$q"],e.prototype.userExists=function(){return this.userLoaded&&null!==this.user},Object.defineProperty(e.prototype,"ready",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),e}();t.UserService=i}]);